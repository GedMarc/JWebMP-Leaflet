
!function(d,h,c){function k(){var a=d.L;j.noConflict=function(){return d.L=a,this},d.L=j}var j={version:"1.0.3"};"object"==typeof module&&"object"==typeof module.exports?module.exports=j:"function"==typeof define&&define.amd&&define(j),"undefined"!=typeof d&&k(),j.Util={extend:function(l){var m,a,q,p;for(a=1,q=arguments.length;a<q;a++){p=arguments[a];for(m in p){l[m]=p[m]}}return l},create:Object.create||function(){function a(){}return function(i){return a.prototype=i,new a}}(),bind:function(l,m){var a=Array.prototype.slice;if(l.bind){return l.bind.apply(l,a.call(arguments,1))}var o=a.call(arguments,2);return function(){return l.apply(m,o.length?o.concat(a.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++j.Util.lastId,a._leaflet_id},lastId:0,throttle:function(l,q,a){var v,u,m,p;return p=function(){v=!1,u&&(m.apply(a,u),u=!1)},m=function(){v?u=arguments:(l.apply(a,arguments),setTimeout(p,q),v=!0)}},wrapNum:function(l,p,a){var r=p[1],q=p[0],m=r-q;return l===r&&a?l:((l-q)%m+m)%m+q},falseFn:function(){return !1},formatNum:function(l,m){var a=Math.pow(10,m||5);return Math.round(l*a)/a},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return j.Util.trim(a).split(/\s+/)},setOptions:function(l,m){l.hasOwnProperty("options")||(l.options=l.options?j.Util.create(l.options):{});for(var a in m){l.options[a]=m[a]}return l.options},getParamString:function(l,m,a){var q=[];for(var p in l){q.push(encodeURIComponent(a?p.toUpperCase():p)+"="+encodeURIComponent(l[p]))}return(m&&m.indexOf("?")!==-1?"&":"?")+q.join("&")},template:function(a,i){return a.replace(j.Util.templateRe,function(e,m){var l=i[m];if(l===c){throw new Error("No value provided for variable "+e)}return"function"==typeof l&&(l=l(i)),l})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(l,m){for(var a=0;a<l.length;a++){if(l[a]===m){return a}}return -1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function o(i){return d["webkit"+i]||d["moz"+i]||d["ms"+i]}function a(q){var n=+new Date,r=Math.max(0,16-(n-p));return p=n+r,d.setTimeout(q,r)}var p=0,l=d.requestAnimationFrame||o("RequestAnimationFrame")||a,m=d.cancelAnimationFrame||o("CancelAnimationFrame")||o("CancelRequestAnimationFrame")||function(i){d.clearTimeout(i)};j.Util.requestAnimFrame=function(q,s,i){return i&&l===a?void q.call(s):l.call(d,j.bind(q,s))},j.Util.cancelAnimFrame=function(i){i&&m.call(d,i)}}(),j.extend=j.Util.extend,j.bind=j.Util.bind,j.stamp=j.Util.stamp,j.setOptions=j.Util.setOptions,j.Class=function(){},j.Class.extend=function(l){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=o.__super__=this.prototype,p=j.Util.create(a);p.constructor=o,o.prototype=p;for(var m in this){this.hasOwnProperty(m)&&"prototype"!==m&&(o[m]=this[m])}return l.statics&&(j.extend(o,l.statics),delete l.statics),l.includes&&(j.Util.extend.apply(null,[p].concat(l.includes)),delete l.includes),p.options&&(l.options=j.Util.extend(j.Util.create(p.options),l.options)),j.extend(p,l),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var i=0,n=p._initHooks.length;i<n;i++){p._initHooks[i].call(this)}}},o},j.Class.include=function(a){return j.extend(this.prototype,a),this},j.Class.mergeOptions=function(a){return j.extend(this.prototype.options,a),this},j.Class.addInitHook=function(l){var m=Array.prototype.slice.call(arguments,1),a="function"==typeof l?l:function(){this[l].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this},j.Evented=j.Class.extend({on:function(l,p,a){if("object"==typeof l){for(var q in l){this._on(q,l[q],p)}}else{l=j.Util.splitWords(l);for(var m=0,o=l.length;m<o;m++){this._on(l[m],p,a)}}return this},off:function(l,p,a){if(l){if("object"==typeof l){for(var q in l){this._off(q,l[q],p)}}else{l=j.Util.splitWords(l);for(var m=0,o=l.length;m<o;m++){this._off(l[m],p,a)}}}else{delete this._events}return this},_on:function(l,u,w){this._events=this._events||{};var v=this._events[l];v||(v=[],this._events[l]=v),w===this&&(w=c);for(var p={fn:u,ctx:w},q=v,i=0,m=q.length;i<m;i++){if(q[i].fn===u&&q[i].ctx===w){return}}q.push(p)},_off:function(l,q,u){var o,p,i;if(this._events&&(o=this._events[l])){if(!q){for(p=0,i=o.length;p<i;p++){o[p].fn=j.Util.falseFn}return void delete this._events[l]}if(u===this&&(u=c),o){for(p=0,i=o.length;p<i;p++){var m=o[p];if(m.ctx===u&&m.fn===q){return m.fn=j.Util.falseFn,this._firingCount&&(this._events[l]=o=o.slice()),void o.splice(p,1)}}}}},fire:function(o,v,m){if(!this.listens(o,m)){return this}var w=j.Util.extend({},v,{type:o,target:this});if(this._events){var q=this._events[o];if(q){this._firingCount=this._firingCount+1||1;for(var u=0,l=q.length;u<l;u++){var p=q[u];p.fn.call(p.ctx||this,w)}this._firingCount--}}return m&&this._propagateEvent(w),this},listens:function(l,m){var a=this._events&&this._events[l];if(a&&a.length){return !0}if(m){for(var o in this._eventParents){if(this._eventParents[o].listens(l,m)){return !0}}}return !1},once:function(l,o,a){if("object"==typeof l){for(var p in l){this.once(p,l[p],o)}return this}var m=j.bind(function(){this.off(l,o,a).off(l,m,a)},this);return this.on(l,o,a).on(l,m,a)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[j.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[j.stamp(a)],this},_propagateEvent:function(a){for(var i in this._eventParents){this._eventParents[i].fire(a.type,j.extend({layer:a.target},a),!0)}}});var f=j.Evented.prototype;f.addEventListener=f.on,f.removeEventListener=f.clearAllEventListeners=f.off,f.addOneTimeEventListener=f.once,f.fireEvent=f.fire,f.hasEventListeners=f.listens,j.Mixin={Events:f},function(){var x=navigator.userAgent.toLowerCase(),q=h.documentElement,J="ActiveXObject" in d,e=x.indexOf("webkit")!==-1,F=x.indexOf("phantom")!==-1,z=x.search("android [23]")!==-1,w=x.indexOf("chrome")!==-1,I=x.indexOf("gecko")!==-1&&!e&&!d.opera&&!J,D=0===navigator.platform.indexOf("Win"),C="undefined"!=typeof orientation||x.indexOf("mobile")!==-1,H=!d.PointerEvent&&d.MSPointerEvent,t=d.PointerEvent||H,o=J&&"transition" in q.style,B="WebKitCSSMatrix" in d&&"m11" in new d.WebKitCSSMatrix&&!z,A="MozPerspective" in q.style,G="OTransition" in q.style,E=!d.L_NO_TOUCH&&(t||"ontouchstart" in d||d.DocumentTouch&&h instanceof d.DocumentTouch);j.Browser={ie:J,ielt9:J&&!h.addEventListener,edge:"msLaunchUri" in navigator&&!("documentMode" in h),webkit:e,gecko:I,android:x.indexOf("android")!==-1,android23:z,chrome:w,safari:!w&&x.indexOf("safari")!==-1,win:D,ie3d:o,webkit3d:B,gecko3d:A,opera12:G,any3d:!d.L_DISABLE_3D&&(o||B||A)&&!G&&!F,mobile:C,mobileWebkit:C&&e,mobileWebkit3d:C&&B,mobileOpera:C&&d.opera,mobileGecko:C&&I,touch:!!E,msPointer:!!H,pointer:!!t,retina:(d.devicePixelRatio||d.screen.deviceXDPI/d.screen.logicalXDPI)>1}}(),j.Point=function(l,m,a){this.x=a?Math.round(l):l,this.y=a?Math.round(m):m},j.Point.prototype={clone:function(){return new j.Point(this.x,this.y)},add:function(a){return this.clone()._add(j.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(j.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new j.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new j.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(l){l=j.point(l);var m=l.x-this.x,a=l.y-this.y;return Math.sqrt(m*m+a*a)},equals:function(a){return a=j.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=j.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+j.Util.formatNum(this.x)+", "+j.Util.formatNum(this.y)+")"}},j.point=function(a,i,l){return a instanceof j.Point?a:j.Util.isArray(a)?new j.Point(a[0],a[1]):a===c||null===a?a:"object"==typeof a&&"x" in a&&"y" in a?new j.Point(a.x,a.y):new j.Point(a,i,l)},j.Bounds=function(l,m){if(l){for(var a=m?[l,m]:l,q=0,p=a.length;q<p;q++){this.extend(a[q])}}},j.Bounds.prototype={extend:function(a){return a=j.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new j.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new j.Point(this.min.x,this.max.y)},getTopRight:function(){return new j.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var m,a;return l="number"==typeof l[0]||l instanceof j.Point?j.point(l):j.bounds(l),l instanceof j.Bounds?(m=l.min,a=l.max):m=a=l,m.x>=this.min.x&&a.x<=this.max.x&&m.y>=this.min.y&&a.y<=this.max.y},intersects:function(o){o=j.bounds(o);var u=this.min,m=this.max,v=o.min,p=o.max,q=p.x>=u.x&&v.x<=m.x,l=p.y>=u.y&&v.y<=m.y;return q&&l},overlaps:function(o){o=j.bounds(o);var u=this.min,m=this.max,v=o.min,p=o.max,q=p.x>u.x&&v.x<m.x,l=p.y>u.y&&v.y<m.y;return q&&l},isValid:function(){return !(!this.min||!this.max)}},j.bounds=function(a,i){return !a||a instanceof j.Bounds?a:new j.Bounds(a,i)},j.Transformation=function(l,m,a,o){this._a=l,this._b=m,this._c=a,this._d=o},j.Transformation.prototype={transform:function(a,i){return this._transform(a.clone(),i)},_transform:function(a,i){return i=i||1,a.x=i*(this._a*a.x+this._b),a.y=i*(this._c*a.y+this._d),a},untransform:function(a,i){return i=i||1,new j.Point((a.x/i-this._b)/this._a,(a.y/i-this._d)/this._c)}},j.DomUtil={get:function(a){return"string"==typeof a?h.getElementById(a):a},getStyle:function(e,a){var m=e.style[a]||e.currentStyle&&e.currentStyle[a];if((!m||"auto"===m)&&h.defaultView){var l=h.defaultView.getComputedStyle(e,null);m=l?l[a]:null}return"auto"===m?null:m},create:function(e,a,m){var l=h.createElement(e);return l.className=a||"",m&&m.appendChild(l),l},remove:function(a){var i=a.parentNode;i&&i.removeChild(a)},empty:function(a){for(;a.firstChild;){a.removeChild(a.firstChild)}},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var i=a.parentNode;i.insertBefore(a,i.firstChild)},hasClass:function(a,i){if(a.classList!==c){return a.classList.contains(i)}var l=j.DomUtil.getClass(a);return l.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(l)},addClass:function(l,p){if(l.classList!==c){for(var q=j.Util.splitWords(p),m=0,o=q.length;m<o;m++){l.classList.add(q[m])}}else{if(!j.DomUtil.hasClass(l,p)){var i=j.DomUtil.getClass(l);j.DomUtil.setClass(l,(i?i+" ":"")+p)}}},removeClass:function(a,i){a.classList!==c?a.classList.remove(i):j.DomUtil.setClass(a,j.Util.trim((" "+j.DomUtil.getClass(a)+" ").replace(" "+i+" "," ")))},setClass:function(a,i){a.className.baseVal===c?a.className=i:a.className.baseVal=i},getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,i){"opacity" in a.style?a.style.opacity=i:"filter" in a.style&&j.DomUtil._setOpacityIE(a,i)},_setOpacityIE:function(l,m){var a=!1,o="DXImageTransform.Microsoft.Alpha";try{a=l.filters.item(o)}catch(l){if(1===m){return}}m=Math.round(100*m),a?(a.Enabled=100!==m,a.Opacity=m):l.style.filter+=" progid:"+o+"(opacity="+m+")"},testProp:function(e){for(var a=h.documentElement.style,l=0;l<e.length;l++){if(e[l] in a){return e[l]}}return !1},setTransform:function(l,m,a){var o=m||new j.Point(0,0);l.style[j.DomUtil.TRANSFORM]=(j.Browser.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(a?" scale("+a+")":"")},setPosition:function(a,i){a._leaflet_pos=i,j.Browser.any3d?j.DomUtil.setTransform(a,i):(a.style.left=i.x+"px",a.style.top=i.y+"px")},getPosition:function(a){return a._leaflet_pos||new j.Point(0,0)}},function(){j.DomUtil.TRANSFORM=j.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var a=j.DomUtil.TRANSITION=j.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(j.DomUtil.TRANSITION_END="webkitTransition"===a||"OTransition"===a?a+"End":"transitionend","onselectstart" in h){j.DomUtil.disableTextSelection=function(){j.DomEvent.on(d,"selectstart",j.DomEvent.preventDefault)},j.DomUtil.enableTextSelection=function(){j.DomEvent.off(d,"selectstart",j.DomEvent.preventDefault)}}else{var e=j.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);j.DomUtil.disableTextSelection=function(){if(e){var i=h.documentElement.style;this._userSelect=i[e],i[e]="none"}},j.DomUtil.enableTextSelection=function(){e&&(h.documentElement.style[e]=this._userSelect,delete this._userSelect)}}j.DomUtil.disableImageDrag=function(){j.DomEvent.on(d,"dragstart",j.DomEvent.preventDefault)},j.DomUtil.enableImageDrag=function(){j.DomEvent.off(d,"dragstart",j.DomEvent.preventDefault)},j.DomUtil.preventOutline=function(i){for(;i.tabIndex===-1;){i=i.parentNode}i&&i.style&&(j.DomUtil.restoreOutline(),this._outlineElement=i,this._outlineStyle=i.style.outline,i.style.outline="none",j.DomEvent.on(d,"keydown",j.DomUtil.restoreOutline,this))},j.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,j.DomEvent.off(d,"keydown",j.DomUtil.restoreOutline,this))}}(),j.LatLng=function(a,i,l){if(isNaN(a)||isNaN(i)){throw new Error("Invalid LatLng object: ("+a+", "+i+")")}this.lat=+a,this.lng=+i,l!==c&&(this.alt=+l)},j.LatLng.prototype={equals:function(a,i){if(!a){return !1}a=j.latLng(a);var l=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return l<=(i===c?1e-9:i)},toString:function(a){return"LatLng("+j.Util.formatNum(this.lat,a)+", "+j.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return j.CRS.Earth.distance(this,j.latLng(a))},wrap:function(){return j.CRS.Earth.wrapLatLng(this)},toBounds:function(l){var m=180*l/40075017,a=m/Math.cos(Math.PI/180*this.lat);return j.latLngBounds([this.lat-m,this.lng-a],[this.lat+m,this.lng+a])},clone:function(){return new j.LatLng(this.lat,this.lng,this.alt)}},j.latLng=function(a,i,l){return a instanceof j.LatLng?a:j.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new j.LatLng(a[0],a[1],a[2]):2===a.length?new j.LatLng(a[0],a[1]):null:a===c||null===a?a:"object"==typeof a&&"lat" in a?new j.LatLng(a.lat,"lng" in a?a.lng:a.lon,a.alt):i===c?null:new j.LatLng(a,i,l)},j.LatLngBounds=function(l,m){if(l){for(var a=m?[l,m]:l,q=0,p=a.length;q<p;q++){this.extend(a[q])}}},j.LatLngBounds.prototype={extend:function(l){var o,a,p=this._southWest,m=this._northEast;if(l instanceof j.LatLng){o=l,a=l}else{if(!(l instanceof j.LatLngBounds)){return l?this.extend(j.latLng(l)||j.latLngBounds(l)):this}if(o=l._southWest,a=l._northEast,!o||!a){return this}}return p||m?(p.lat=Math.min(o.lat,p.lat),p.lng=Math.min(o.lng,p.lng),m.lat=Math.max(a.lat,m.lat),m.lng=Math.max(a.lng,m.lng)):(this._southWest=new j.LatLng(o.lat,o.lng),this._northEast=new j.LatLng(a.lat,a.lng)),this},pad:function(l){var o=this._southWest,a=this._northEast,p=Math.abs(o.lat-a.lat)*l,m=Math.abs(o.lng-a.lng)*l;return new j.LatLngBounds(new j.LatLng(o.lat-p,o.lng-m),new j.LatLng(a.lat+p,a.lng+m))},getCenter:function(){return new j.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new j.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){l="number"==typeof l[0]||l instanceof j.LatLng||"lat" in l?j.latLng(l):j.latLngBounds(l);var o,a,p=this._southWest,m=this._northEast;return l instanceof j.LatLngBounds?(o=l.getSouthWest(),a=l.getNorthEast()):o=a=l,o.lat>=p.lat&&a.lat<=m.lat&&o.lng>=p.lng&&a.lng<=m.lng},intersects:function(o){o=j.latLngBounds(o);var u=this._southWest,m=this._northEast,v=o.getSouthWest(),p=o.getNorthEast(),q=p.lat>=u.lat&&v.lat<=m.lat,l=p.lng>=u.lng&&v.lng<=m.lng;return q&&l},overlaps:function(o){o=j.latLngBounds(o);var u=this._southWest,m=this._northEast,v=o.getSouthWest(),p=o.getNorthEast(),q=p.lat>u.lat&&v.lat<m.lat,l=p.lng>u.lng&&v.lng<m.lng;return q&&l},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return !!a&&(a=j.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return !(!this._southWest||!this._northEast)}},j.latLngBounds=function(a,i){return a instanceof j.LatLngBounds?a:new j.LatLngBounds(a,i)},j.Projection={},j.Projection.LonLat={project:function(a){return new j.Point(a.lng,a.lat)},unproject:function(a){return new j.LatLng(a.y,a.x)},bounds:j.bounds([-180,-90],[180,90])},j.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(l){var o=Math.PI/180,a=this.MAX_LATITUDE,p=Math.max(Math.min(a,l.lat),-a),m=Math.sin(p*o);return new j.Point(this.R*l.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(a){var i=180/Math.PI;return new j.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*i,a.x*i/this.R)},bounds:function(){var a=6378137*Math.PI;return j.bounds([-a,-a],[a,a])}()},j.CRS={latLngToPoint:function(l,m){var a=this.projection.project(l),o=this.scale(m);return this.transformation._transform(a,o)},pointToLatLng:function(l,m){var a=this.scale(m),o=this.transformation.untransform(l,a);return this.projection.unproject(o)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite){return null}var o=this.projection.bounds,a=this.scale(l),p=this.transformation.transform(o.min,a),m=this.transformation.transform(o.max,a);return j.bounds(p,m)},infinite:!1,wrapLatLng:function(l){var m=this.wrapLng?j.Util.wrapNum(l.lng,this.wrapLng,!0):l.lng,a=this.wrapLat?j.Util.wrapNum(l.lat,this.wrapLat,!0):l.lat,o=l.alt;return j.latLng(a,m,o)},wrapLatLngBounds:function(x){var v=x.getCenter(),q=this.wrapLatLng(v),o=v.lat-q.lat,y=v.lng-q.lng;if(0===o&&0===y){return x}var m=x.getSouthWest(),w=x.getNorthEast(),u=j.latLng({lat:m.lat-o,lng:m.lng-y}),p=j.latLng({lat:w.lat-o,lng:w.lng-y});return new j.LatLngBounds(u,p)}},j.CRS.Simple=j.extend({},j.CRS,{projection:j.Projection.LonLat,transformation:new j.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(l,m){var a=m.lng-l.lng,o=m.lat-l.lat;return Math.sqrt(a*a+o*o)},infinite:!0}),j.CRS.Earth=j.extend({},j.CRS,{wrapLng:[-180,180],R:6371000,distance:function(l,p){var a=Math.PI/180,r=l.lat*a,q=p.lat*a,m=Math.sin(r)*Math.sin(q)+Math.cos(r)*Math.cos(q)*Math.cos((p.lng-l.lng)*a);return this.R*Math.acos(Math.min(m,1))}}),j.CRS.EPSG3857=j.extend({},j.CRS.Earth,{code:"EPSG:3857",projection:j.Projection.SphericalMercator,transformation:function(){var a=0.5/(Math.PI*j.Projection.SphericalMercator.R);return new j.Transformation(a,0.5,-a,0.5)}()}),j.CRS.EPSG900913=j.extend({},j.CRS.EPSG3857,{code:"EPSG:900913"}),j.CRS.EPSG4326=j.extend({},j.CRS.Earth,{code:"EPSG:4326",projection:j.Projection.LonLat,transformation:new j.Transformation(1/180,1,-1/180,0.5)}),j.Map=j.Evented.extend({options:{crs:j.CRS.EPSG3857,center:c,zoom:c,minZoom:c,maxZoom:c,layers:[],maxBounds:c,renderer:c,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,i){i=j.setOptions(this,i),this._initContainer(a),this._initLayout(),this._onResize=j.bind(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==c&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==c&&this.setView(j.latLng(i.center),i.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=j.DomUtil.TRANSITION&&j.Browser.any3d&&!j.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),j.DomEvent.on(this._proxy,j.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,l,m){if(l=l===c?this._zoom:this._limitZoom(l),a=this._limitCenter(j.latLng(a),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==c&&(m.zoom=j.extend({animate:m.animate},m.zoom),m.pan=j.extend({animate:m.animate,duration:m.duration},m.pan));var i=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,l,m.zoom):this._tryAnimatedPan(a,m.pan);if(i){return clearTimeout(this._sizeTimer),this}}return this._resetView(a,l),this},setZoom:function(a,i){return this._loaded?this.setView(this.getCenter(),a,{zoom:i}):(this._zoom=a,this)},zoomIn:function(a,i){return a=a||(j.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,i)},zoomOut:function(a,i){return a=a||(j.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,i)},setZoomAround:function(o,v,m){var w=this.getZoomScale(v),q=this.getSize().divideBy(2),u=o instanceof j.Point?o:this.latLngToContainerPoint(o),l=u.subtract(q).multiplyBy(1-1/w),p=this.containerPointToLatLng(q.add(l));return this.setView(p,v,{zoom:m})},_getBoundsCenterZoom:function(x,v){v=v||{},x=x.getBounds?x.getBounds():j.latLngBounds(x);var q=j.point(v.paddingTopLeft||v.padding||[0,0]),o=j.point(v.paddingBottomRight||v.padding||[0,0]),y=this.getBoundsZoom(x,!1,q.add(o));y="number"==typeof v.maxZoom?Math.min(v.maxZoom,y):y;var m=o.subtract(q).divideBy(2),w=this.project(x.getSouthWest(),y),u=this.project(x.getNorthEast(),y),p=this.unproject(w.add(u).divideBy(2).add(m),y);return{center:p,zoom:y}},fitBounds:function(l,m){if(l=j.latLngBounds(l),!l.isValid()){throw new Error("Bounds are not valid.")}var a=this._getBoundsCenterZoom(l,m);return this.setView(a.center,a.zoom,m)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,i){return this.setView(a,this._zoom,{pan:i})},panBy:function(l,m){if(l=j.point(l).round(),m=m||{},!l.x&&!l.y){return this.fire("moveend")}if(m.animate!==!0&&!this.getSize().contains(l)){return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this}if(this._panAnim||(this._panAnim=new j.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){j.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,a,m.duration||0.25,m.easeLinearity)}else{this._rawPanBy(l),this.fire("move").fire("moveend")}return this},flyTo:function(E,Q,I){function F(p){var w=p?-1:1,m=p?C:N,y=C*C-N*N+w*q*q*z*z,x=2*m*q*z,u=y/x,v=Math.sqrt(u*u+1)-u,l=v<1e-9?-18:Math.log(v);return l}function G(a){return(Math.exp(a)-Math.exp(-a))/2}function V(a){return(Math.exp(a)+Math.exp(-a))/2}function M(a){return G(a)/V(a)}function K(a){return N*(V(A)/V(A+o*a))}function D(a){return N*(V(A)*M(A+o*a)-G(A))/q}function S(a){return 1-Math.pow(1-a,1.5)}function R(){var a=(Date.now()-B)/i,e=S(a)*U;a<=1?(this._flyToFrame=j.Util.requestAnimFrame(R,this),this._move(this.unproject(W.add(J.subtract(W).multiplyBy(D(e)/z)),O),this.getScaleZoom(N/K(e),O),{flyTo:!0})):this._move(E,Q)._moveEnd(!0)}if(I=I||{},I.animate===!1||!j.Browser.any3d){return this.setView(E,Q,I)}this._stop();var W=this.project(this.getCenter()),J=this.project(E),H=this.getSize(),O=this._zoom;E=j.latLng(E),Q=Q===c?O:Q;var N=Math.max(H.x,H.y),C=N*this.getZoomScale(O,Q),z=J.distanceTo(W)||1,o=1.42,q=o*o,A=F(0),B=Date.now(),U=(F(1)-A)/o,i=I.duration?1000*I.duration:1000*U*0.8;return this._moveStart(!0),R.call(this),this},flyToBounds:function(l,m){var a=this._getBoundsCenterZoom(l,m);return this.flyTo(a.center,a.zoom,m)},setMaxBounds:function(a){return a=j.latLngBounds(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(l,m){this._enforcingBounds=!0;var a=this.getCenter(),o=this._limitCenter(a,this._zoom,j.latLngBounds(l));return a.equals(o)||this.panTo(o,m),this._enforcingBounds=!1,this},invalidateSize:function(l){if(!this._loaded){return this}l=j.extend({animate:!1,pan:!0},l===!0?{animate:!0}:l);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),q=p.divideBy(2).round(),m=a.divideBy(2).round(),o=q.subtract(m);return o.x||o.y?(l.animate&&l.pan?this.panBy(o):(l.pan&&this._rawPanBy(o),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(j.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:a})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=j.extend({timeout:10000,watch:!1},l),!("geolocation" in navigator)){return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this}var m=j.bind(this._handleGeolocationResponse,this),a=j.bind(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,a,l):navigator.geolocation.getCurrentPosition(m,a,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){var m=l.code,a=l.message||(1===m?"permission denied":2===m?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(x){var v=x.coords.latitude,q=x.coords.longitude,o=new j.LatLng(v,q),y=o.toBounds(x.coords.accuracy),m=this._locateOptions;if(m.setView){var w=this.getBoundsZoom(y);this.setView(o,m.maxZoom?Math.min(w,m.maxZoom):w)}var u={latlng:o,bounds:y,timestamp:x.timestamp};for(var p in x.coords){"number"==typeof x.coords[p]&&(u[p]=x.coords[p])}this.fire("locationfound",u)},addHandler:function(l,m){if(!m){return this}var a=this[l]=new m(this);return this._handlers.push(a),this.options[l]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id){throw new Error("Map container is being reused by another instance")}try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=c,this._containerId=c}j.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var a in this._layers){this._layers[a].remove()}return this},createPane:function(l,m){var a="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),o=j.DomUtil.create("div",a,m||this._mapPane);return l&&(this._panes[l]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),m=this.unproject(l.getBottomLeft()),a=this.unproject(l.getTopRight());return new j.LatLngBounds(m,a)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(B,w,q){B=j.latLngBounds(B),q=j.point(q||[0,0]);var o=this.getZoom()||0,C=this.getMinZoom(),m=this.getMaxZoom(),z=B.getNorthWest(),v=B.getSouthEast(),p=this.getSize().subtract(q),A=j.bounds(this.project(v,o),this.project(z,o)).getSize(),y=j.Browser.any3d?this.options.zoomSnap:1,x=Math.min(p.x/A.x,p.y/A.y);return o=this.getScaleZoom(x,o),y&&(o=Math.round(o/(y/100))*(y/100),o=w?Math.ceil(o/y)*y:Math.floor(o/y)*y),Math.max(C,Math.min(m,o))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new j.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,m){var a=this._getTopLeftPoint(l,m);return new j.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===c?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,i){var l=this.options.crs;return i=i===c?this._zoom:i,l.scale(a)/l.scale(i)},getScaleZoom:function(a,i){var m=this.options.crs;i=i===c?this._zoom:i;var l=m.zoom(a*m.scale(i));return isNaN(l)?1/0:l},project:function(a,i){return i=i===c?this._zoom:i,this.options.crs.latLngToPoint(j.latLng(a),i)},unproject:function(a,i){return i=i===c?this._zoom:i,this.options.crs.pointToLatLng(j.point(a),i)},layerPointToLatLng:function(a){var i=j.point(a).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(a){var i=this.project(j.latLng(a))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(j.latLng(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(j.latLngBounds(a))},distance:function(a,i){return this.options.crs.distance(j.latLng(a),j.latLng(i))},containerPointToLayerPoint:function(a){return j.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return j.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var i=this.containerPointToLayerPoint(j.point(a));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j.latLng(a)))},mouseEventToContainerPoint:function(a){return j.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var i=this._container=j.DomUtil.get(a);if(!i){throw new Error("Map container not found.")}if(i._leaflet_id){throw new Error("Map container is already initialized.")}j.DomEvent.addListener(i,"scroll",this._onScroll,this),this._containerId=j.Util.stamp(i)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&j.Browser.any3d,j.DomUtil.addClass(a,"leaflet-container"+(j.Browser.touch?" leaflet-touch":"")+(j.Browser.retina?" leaflet-retina":"")+(j.Browser.ielt9?" leaflet-oldie":"")+(j.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=j.DomUtil.getStyle(a,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),j.DomUtil.setPosition(this._mapPane,new j.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(j.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),j.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,m){j.DomUtil.setPosition(this._mapPane,new j.Point(0,0));var a=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var o=this._zoom!==m;this._moveStart(o)._move(l,m)._moveEnd(o),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},_move:function(a,i,m){i===c&&(i=this._zoom);var l=this._zoom!==i;return this._zoom=i,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(l||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return j.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){j.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(l){if(j.DomEvent){this._targets={},this._targets[j.stamp(this._container)]=this;var a=l?"off":"on";j.DomEvent[a](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&j.DomEvent[a](d,"resize",this._onResize,this),j.Browser.any3d&&this.options.transform3DLimit&&this[a]("moveend",this._onMoveEnd)}},_onResize:function(){j.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=j.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,u){for(var m,v=[],p="mouseout"===u||"mouseover"===u,q=o.target||o.srcElement,l=!1;q;){if(m=this._targets[j.stamp(q)],m&&("click"===u||"preclick"===u)&&!o._simulated&&this._draggableMoved(m)){l=!0;break}if(m&&m.listens(u,!0)){if(p&&!j.DomEvent._isExternalTarget(q,o)){break}if(v.push(m),p){break}}if(q===this._container){break}q=q.parentNode}return v.length||l||p||!j.DomEvent._isExternalTarget(q,o)||(v=[this]),v},_handleDOMEvent:function(a){if(this._loaded&&!j.DomEvent._skipped(a)){var i="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===i&&j.DomUtil.preventOutline(a.target||a.srcElement),this._fireDOMEvent(a,i)}},_fireDOMEvent:function(o,v,m){if("click"===o.type){var w=j.Util.extend({},o);w.type="preclick",this._fireDOMEvent(w,w.type,m)}if(!o._stopped&&(m=(m||[]).concat(this._findEventTargets(o,v)),m.length)){var q=m[0];"contextmenu"===v&&q.listens(v,!0)&&j.DomEvent.preventDefault(o);var u={originalEvent:o};if("keypress"!==o.type){var l=q instanceof j.Marker;u.containerPoint=l?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(o),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=l?q.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(var p=0;p<m.length;p++){if(m[p].fire(v,u,!0),u.originalEvent._stopped||m[p].options.nonBubblingEvents&&j.Util.indexOf(m[p].options.nonBubblingEvents,v)!==-1){return}}}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,i=this._handlers.length;a<i;a++){this._handlers[a].disable()}},whenReady:function(a,i){return this._loaded?a.call(i||this,{target:this}):this.on("load",a,i),this},_getMapPanePos:function(){return j.DomUtil.getPosition(this._mapPane)||new j.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,i){var l=a&&i!==c?this._getNewPixelOrigin(a,i):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,m){var a=this.getSize()._divideBy(2);return this.project(l,m)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,m,a){var o=this._getNewPixelOrigin(a,m);return this.project(l,m)._subtract(o)},_latLngBoundsToNewLayerBounds:function(l,m,a){var o=this._getNewPixelOrigin(a,m);return j.bounds([this.project(l.getSouthWest(),m)._subtract(o),this.project(l.getNorthWest(),m)._subtract(o),this.project(l.getSouthEast(),m)._subtract(o),this.project(l.getNorthEast(),m)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,u,m){if(!m){return o}var v=this.project(o,u),p=this.getSize().divideBy(2),q=new j.Bounds(v.subtract(p),v.add(p)),l=this._getBoundsOffset(q,m,u);return l.round().equals([0,0])?o:this.unproject(v.add(l),u)},_limitOffset:function(l,m){if(!m){return l}var a=this.getPixelBounds(),o=new j.Bounds(a.min.add(l),a.max.add(l));return l.add(this._getBoundsOffset(o,m))},_getBoundsOffset:function(o,v,m){var w=j.bounds(this.project(v.getNorthEast(),m),this.project(v.getSouthWest(),m)),q=w.min.subtract(o.min),u=w.max.subtract(o.max),l=this._rebound(q.x,-u.x),p=this._rebound(q.y,-u.y);return new j.Point(l,p)},_rebound:function(a,i){return a+i>0?Math.round(a-i)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(i))},_limitZoom:function(l){var m=this.getMinZoom(),a=this.getMaxZoom(),o=j.Browser.any3d?this.options.zoomSnap:1;return o&&(l=Math.round(l/o)*o),Math.max(m,Math.min(a,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){j.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,m){var a=this._getCenterOffset(l)._floor();return !((m&&m.animate)!==!0&&!this.getSize().contains(a))&&(this.panBy(a,m),!0)},_createAnimProxy:function(){var a=this._proxy=j.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(m){var l=j.DomUtil.TRANSFORM,o=a.style[l];j.DomUtil.setTransform(a,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),o===a.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var m=this.getCenter(),l=this.getZoom();j.DomUtil.setTransform(a,this.project(m,l),this.getZoomScale(l,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,o,a){if(this._animatingZoom){return !0}if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold){return !1}var p=this.getZoomScale(o),m=this._getCenterOffset(l)._divideBy(1-1/p);return !(a.animate!==!0&&!this.getSize().contains(m))&&(j.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(l,o,!0)},this),!0)},_animateZoom:function(l,m,a,o){a&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=m,j.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:m,noUpdate:o}),setTimeout(j.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(j.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),j.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),j.map=function(a,i){return new j.Map(a,i)},j.Layer=j.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[j.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[j.stamp(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var m=l.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var a=this.getEvents();m.on(a,this),this.once("remove",function(){m.off(a,this)},this)}this.onAdd(m),this.getAttribution&&m.attributionControl&&m.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),m.fire("layeradd",{layer:this})}}}),j.Map.include({addLayer:function(a){var i=j.stamp(a);return this._layers[i]?this:(this._layers[i]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var i=j.stamp(a);return this._layers[i]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return !!a&&j.stamp(a) in this._layers},eachLayer:function(l,m){for(var a in this._layers){l.call(m,this._layers[a])}return this},_addLayers:function(l){l=l?j.Util.isArray(l)?l:[l]:[];for(var m=0,a=l.length;m<a;m++){this.addLayer(l[m])}},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[j.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var i=j.stamp(a);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,l=-(1/0),p=this._getZoomSpan();for(var m in this._zoomBoundLayers){var i=this._zoomBoundLayers[m].options;a=i.minZoom===c?a:Math.min(a,i.minZoom),l=i.maxZoom===c?l:Math.max(l,i.maxZoom)}this._layersMaxZoom=l===-(1/0)?c:l,this._layersMinZoom=a===1/0?c:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===c&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===c&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var g="_leaflet_events";j.DomEvent={on:function(o,u,m,v){if("object"==typeof u){for(var p in u){this._on(o,p,u[p],m)}}else{u=j.Util.splitWords(u);for(var q=0,l=u.length;q<l;q++){this._on(o,u[q],m,v)}}return this},off:function(o,u,m,v){if("object"==typeof u){for(var p in u){this._off(o,p,u[p],m)}}else{u=j.Util.splitWords(u);for(var q=0,l=u.length;q<l;q++){this._off(o,u[q],m,v)}}return this},_on:function(t,p,u,r){var o=p+j.stamp(u)+(r?"_"+j.stamp(r):"");if(t[g]&&t[g][o]){return this}var q=function(a){return u.call(r||t,a||d.event)},m=q;return j.Browser.pointer&&0===p.indexOf("touch")?this.addPointerListener(t,p,q,o):!j.Browser.touch||"dblclick"!==p||!this.addDoubleTapListener||j.Browser.pointer&&j.Browser.chrome?"addEventListener" in t?"mousewheel"===p?t.addEventListener("onwheel" in t?"wheel":"mousewheel",q,!1):"mouseenter"===p||"mouseleave"===p?(q=function(a){a=a||d.event,j.DomEvent._isExternalTarget(t,a)&&m(a)},t.addEventListener("mouseenter"===p?"mouseover":"mouseout",q,!1)):("click"===p&&j.Browser.android&&(q=function(a){return j.DomEvent._filterClick(a,m)}),t.addEventListener(p,q,!1)):"attachEvent" in t&&t.attachEvent("on"+p,q):this.addDoubleTapListener(t,q,o),t[g]=t[g]||{},t[g][o]=q,this},_off:function(o,q,m,r){var p=q+j.stamp(m)+(r?"_"+j.stamp(r):""),l=o[g]&&o[g][p];return l?(j.Browser.pointer&&0===q.indexOf("touch")?this.removePointerListener(o,q,p):j.Browser.touch&&"dblclick"===q&&this.removeDoubleTapListener?this.removeDoubleTapListener(o,p):"removeEventListener" in o?"mousewheel"===q?o.removeEventListener("onwheel" in o?"wheel":"mousewheel",l,!1):o.removeEventListener("mouseenter"===q?"mouseover":"mouseleave"===q?"mouseout":q,l,!1):"detachEvent" in o&&o.detachEvent("on"+q,l),o[g][p]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,j.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return j.DomEvent.on(a,"mousewheel",j.DomEvent.stopPropagation)},disableClickPropagation:function(a){var i=j.DomEvent.stopPropagation;return j.DomEvent.on(a,j.Draggable.START.join(" "),i),j.DomEvent.on(a,{click:j.DomEvent._fakeStop,dblclick:i})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return j.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(l,m){if(!m){return new j.Point(l.clientX,l.clientY)}var a=m.getBoundingClientRect();return new j.Point(l.clientX-a.left-m.clientLeft,l.clientY-a.top-m.clientTop)},_wheelPxFactor:j.Browser.win&&j.Browser.chrome?2:j.Browser.gecko?d.devicePixelRatio:1,getWheelDelta:function(a){return j.Browser.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/j.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(a){j.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var i=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,i},_isExternalTarget:function(l,m){var a=m.relatedTarget;if(!a){return !0}try{for(;a&&a!==l;){a=a.parentNode}}catch(l){return !1}return a!==l},_filterClick:function(l,m){var a=l.timeStamp||l.originalEvent&&l.originalEvent.timeStamp,o=j.DomEvent._lastClick&&a-j.DomEvent._lastClick;return o&&o>100&&o<500||l.target._simulatedClick&&!l._simulated?void j.DomEvent.stop(l):(j.DomEvent._lastClick=a,void m(l))}},j.DomEvent.addListener=j.DomEvent.on,j.DomEvent.removeListener=j.DomEvent.off,j.PosAnimation=j.Evented.extend({run:function(l,m,a,o){this.stop(),this._el=l,this._inProgress=!0,this._duration=a||0.25,this._easeOutPower=1/Math.max(o||0.5,0.2),this._startPos=j.DomUtil.getPosition(l),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(l){var m=+new Date-this._startTime,a=1000*this._duration;m<a?this._runFrame(this._easeOut(m/a),l):(this._runFrame(1),this._complete())},_runFrame:function(l,m){var a=this._startPos.add(this._offset.multiplyBy(l));m&&a._round(),j.DomUtil.setPosition(this._el,a),this.fire("step")},_complete:function(){j.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),j.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:j.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(o){var v=Math.PI/180,m=this.R,w=o.lat*v,q=this.R_MINOR/m,u=Math.sqrt(1-q*q),l=u*Math.sin(w),p=Math.tan(Math.PI/4-w/2)/Math.pow((1-l)/(1+l),u/2);return w=-m*Math.log(Math.max(p,1e-10)),new j.Point(o.lng*v*m,w)},unproject:function(z){for(var w,q=180/Math.PI,o=this.R,A=this.R_MINOR/o,m=Math.sqrt(1-A*A),x=Math.exp(-z.y/o),v=Math.PI/2-2*Math.atan(x),p=0,y=0.1;p<15&&Math.abs(y)>1e-7;p++){w=m*Math.sin(v),w=Math.pow((1-w)/(1+w),m/2),y=Math.PI/2-2*Math.atan(x*w)-v,v+=y}return new j.LatLng(v*q,z.x*q/o)}},j.CRS.EPSG3395=j.extend({},j.CRS.Earth,{code:"EPSG:3395",projection:j.Projection.Mercator,transformation:function(){var a=0.5/(Math.PI*j.Projection.Mercator.R);return new j.Transformation(a,0.5,-a,0.5)}()}),j.GridLayer=j.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:j.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:c,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){j.setOptions(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),j.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(j.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(j.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=j.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return h.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof j.Point?a:new j.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var p,a=this.getPane().children,r=-l(-(1/0),1/0),q=0,m=a.length;q<m;q++){p=a[q].style.zIndex,a[q]!==this._container&&p&&(r=l(r,+p))}isFinite(r)&&(this.options.zIndex=r+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!j.Browser.ielt9){j.DomUtil.setOpacity(this._container,this.options.opacity);var l=+new Date,p=!1,a=!1;for(var q in this._tiles){var m=this._tiles[q];if(m.current&&m.loaded){var o=Math.min(1,(l-m.loaded)/200);j.DomUtil.setOpacity(m.el,o),o<1?p=!0:(m.active&&(a=!0),m.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),p&&(j.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=j.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=j.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,m=this.options.maxZoom;if(a===c){return c}for(var o in this._levels){this._levels[o].el.children.length||o===a?this._levels[o].el.style.zIndex=m-Math.abs(a-o):(j.DomUtil.remove(this._levels[o].el),this._removeTilesAtZoom(o),delete this._levels[o])}var i=this._levels[a],l=this._map;return i||(i=this._levels[a]={},i.el=j.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=m,i.origin=l.project(l.unproject(l.getPixelOrigin()),a).round(),i.zoom=a,this._setZoomTransform(i,l.getCenter(),l.getZoom()),j.Util.falseFn(i.el.offsetWidth)),this._level=i,i},_pruneTiles:function(){if(this._map){var l,m,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){return void this._removeAllTiles()}for(l in this._tiles){m=this._tiles[l],m.retain=m.current}for(l in this._tiles){if(m=this._tiles[l],m.current&&!m.active){var o=m.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}}for(l in this._tiles){this._tiles[l].retain||this._removeTile(l)}}},_removeTilesAtZoom:function(a){for(var i in this._tiles){this._tiles[i].coords.z===a&&this._removeTile(i)}},_removeAllTiles:function(){for(var a in this._tiles){this._removeTile(a)}},_invalidateAll:function(){for(var a in this._levels){j.DomUtil.remove(this._levels[a].el),delete this._levels[a]}this._removeAllTiles(),this._tileZoom=null},_retainParent:function(z,w,q,o){var A=Math.floor(z/2),m=Math.floor(w/2),x=q-1,v=new j.Point(+A,+m);v.z=+x;var p=this._tileCoordsToKey(v),y=this._tiles[p];return y&&y.active?(y.retain=!0,!0):(y&&y.loaded&&(y.retain=!0),x>o&&this._retainParent(A,m,x,o))},_retainChildren:function(x,v,q,o){for(var y=2*x;y<2*x+2;y++){for(var m=2*v;m<2*v+2;m++){var w=new j.Point(y,m);w.z=q+1;var u=this._tileCoordsToKey(w),p=this._tiles[u];p&&p.active?p.retain=!0:(p&&p.loaded&&(p.retain=!0),q+1<o&&this._retainChildren(y,m,q+1,o))}}},_resetView:function(a){var i=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,m,q,p){var i=Math.round(m);(this.options.maxZoom!==c&&i>this.options.maxZoom||this.options.minZoom!==c&&i<this.options.minZoom)&&(i=c);var l=this.options.updateWhenZooming&&i!==this._tileZoom;p&&!l||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==c&&this._update(a),q||this._pruneTiles(),this._noPrune=!!q),this._setZoomTransforms(a,m)},_setZoomTransforms:function(l,m){for(var a in this._levels){this._setZoomTransform(this._levels[a],l,m)}},_setZoomTransform:function(l,o,a){var p=this._map.getZoomScale(a,l.zoom),m=l.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(o,a)).round();j.Browser.any3d?j.DomUtil.setTransform(l.el,m,p):j.DomUtil.setPosition(l.el,m)},_resetGrid:function(){var l=this._map,m=l.options.crs,a=this._tileSize=this.getTileSize(),q=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,m.wrapLng[0]],q).x/a.x),Math.ceil(l.project([0,m.wrapLng[1]],q).x/a.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([m.wrapLat[0],0],q).y/a.x),Math.ceil(l.project([m.wrapLat[1],0],q).y/a.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(l){var p=this._map,a=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),q=p.getZoomScale(a,this._tileZoom),m=p.project(l,this._tileZoom).floor(),o=p.getSize().divideBy(2*q);return new j.Bounds(m.subtract(o),m.add(o))},_update:function(G){var o=this._map;if(o){var H=o.getZoom();if(G===c&&(G=o.getCenter()),this._tileZoom!==c){var e=this._getTiledPixelBounds(G),C=this._pxBoundsToTileRange(e),x=C.getCenter(),w=[],F=this.options.keepBuffer,B=new j.Bounds(C.getBottomLeft().subtract([F,-F]),C.getTopRight().add([F,-F]));for(var A in this._tiles){var E=this._tiles[A].coords;E.z===this._tileZoom&&B.contains(j.point(E.x,E.y))||(this._tiles[A].current=!1)}if(Math.abs(H-this._tileZoom)>1){return void this._setView(G,H)}for(var q=C.min.y;q<=C.max.y;q++){for(var i=C.min.x;i<=C.max.x;i++){var z=new j.Point(i,q);if(z.z=this._tileZoom,this._isValidTile(z)){var y=this._tiles[this._tileCoordsToKey(z)];y?y.current=!0:w.push(z)}}}if(w.sort(function(a,l){return a.distanceTo(x)-l.distanceTo(x)}),0!==w.length){this._loading||(this._loading=!0,this.fire("loading"));var D=h.createDocumentFragment();for(i=0;i<w.length;i++){this._addTile(w[i],D)}this._level.el.appendChild(D)}}}},_isValidTile:function(l){var m=this._map.options.crs;if(!m.infinite){var a=this._globalTileRange;if(!m.wrapLng&&(l.x<a.min.x||l.x>a.max.x)||!m.wrapLat&&(l.y<a.min.y||l.y>a.max.y)){return !1}}if(!this.options.bounds){return !0}var o=this._tileCoordsToBounds(l);return j.latLngBounds(this.options.bounds).overlaps(o)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(o){var v=this._map,m=this.getTileSize(),w=o.scaleBy(m),q=w.add(m),u=v.unproject(w,o.z),l=v.unproject(q,o.z),p=new j.LatLngBounds(u,l);return this.options.noWrap||v.wrapLatLngBounds(p),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(l){var m=l.split(":"),a=new j.Point(+m[0],+m[1]);return a.z=+m[2],a},_removeTile:function(a){var i=this._tiles[a];i&&(j.DomUtil.remove(i.el),delete this._tiles[a],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){j.DomUtil.addClass(a,"leaflet-tile");var i=this.getTileSize();a.style.width=i.x+"px",a.style.height=i.y+"px",a.onselectstart=j.Util.falseFn,a.onmousemove=j.Util.falseFn,j.Browser.ielt9&&this.options.opacity<1&&j.DomUtil.setOpacity(a,this.options.opacity),j.Browser.android&&!j.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(l,o){var a=this._getTilePos(l),p=this._tileCoordsToKey(l),m=this.createTile(this._wrapCoords(l),j.bind(this._tileReady,this,l));this._initTile(m),this.createTile.length<2&&j.Util.requestAnimFrame(j.bind(this._tileReady,this,l,null,m)),j.DomUtil.setPosition(m,a),this._tiles[p]={el:m,coords:l,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:l})},_tileReady:function(l,m,a){if(this._map){m&&this.fire("tileerror",{error:m,tile:a,coords:l});var o=this._tileCoordsToKey(l);a=this._tiles[o],a&&(a.loaded=+new Date,this._map._fadeAnimated?(j.DomUtil.setOpacity(a.el,0),j.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=j.Util.requestAnimFrame(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),m||(j.DomUtil.addClass(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),j.Browser.ielt9||!this._map._fadeAnimated?j.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(j.bind(this._pruneTiles,this),250)))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var i=new j.Point(this._wrapX?j.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?j.Util.wrapNum(a.y,this._wrapY):a.y);return i.z=a.z,i},_pxBoundsToTileRange:function(a){var i=this.getTileSize();return new j.Bounds(a.min.unscaleBy(i).floor(),a.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles){if(!this._tiles[a].loaded){return !1}}return !0}}),j.gridLayer=function(a){return new j.GridLayer(a)},j.TileLayer=j.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,i){this._url=a,i=j.setOptions(this,i),i.detectRetina&&j.Browser.retina&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),j.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,i){return this._url=a,i||this.redraw(),this},createTile:function(e,a){var l=h.createElement("img");return j.DomEvent.on(l,"load",j.bind(this._tileOnLoad,this,a,l)),j.DomEvent.on(l,"error",j.bind(this._tileOnError,this,a,l)),this.options.crossOrigin&&(l.crossOrigin=""),l.alt="",l.setAttribute("role","presentation"),l.src=this.getTileUrl(e),l},getTileUrl:function(l){var m={r:j.Browser.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-l.y;this.options.tms&&(m.y=a),m["-y"]=a}return j.Util.template(this._url,j.extend(m,this.options))},_tileOnLoad:function(a,i){j.Browser.ielt9?setTimeout(j.bind(a,this,null,i),0):a(null,i)},_tileOnError:function(l,m,a){var o=this.options.errorTileUrl;o&&m.src!==o&&(m.src=o),l(a,m)},getTileSize:function(){var l=this._map,o=j.GridLayer.prototype.getTileSize.call(this),a=this._tileZoom+this.options.zoomOffset,p=this.options.minNativeZoom,m=this.options.maxNativeZoom;return null!==p&&a<p?o.divideBy(l.getZoomScale(p,a)).round():null!==m&&a>m?o.divideBy(l.getZoomScale(m,a)).round():o},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,p=this.options.maxZoom,a=this.options.zoomReverse,r=this.options.zoomOffset,q=this.options.minNativeZoom,m=this.options.maxNativeZoom;return a&&(l=p-l),l+=r,null!==q&&l<q?q:null!==m&&l>m?m:l},_getSubdomain:function(a){var i=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var a,i;for(a in this._tiles){this._tiles[a].coords.z!==this._tileZoom&&(i=this._tiles[a].el,i.onload=j.Util.falseFn,i.onerror=j.Util.falseFn,i.complete||(i.src=j.Util.emptyImageUrl,j.DomUtil.remove(i)))}}}),j.tileLayer=function(a,i){return new j.TileLayer(a,i)},j.TileLayer.WMS=j.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,m){this._url=l;var a=j.extend({},this.defaultWmsParams);for(var o in m){o in this.options||(a[o]=m[o])}m=j.setOptions(this,m),a.width=a.height=m.tileSize*(m.detectRetina&&j.Browser.retina?2:1),this.wmsParams=a},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,j.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(l){var p=this._tileCoordsToBounds(l),a=this._crs.project(p.getNorthWest()),q=this._crs.project(p.getSouthEast()),m=(this._wmsVersion>=1.3&&this._crs===j.CRS.EPSG4326?[q.y,a.x,a.y,q.x]:[a.x,q.y,q.x,a.y]).join(","),o=j.TileLayer.prototype.getTileUrl.call(this,l);return o+j.Util.getParamString(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+m},setParams:function(a,i){return j.extend(this.wmsParams,a),i||this.redraw(),this}}),j.tileLayer.wms=function(a,i){return new j.TileLayer.WMS(a,i)},j.ImageOverlay=j.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(l,m,a){this._url=l,this._bounds=j.latLngBounds(m),j.setOptions(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(j.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){j.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&j.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&j.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=j.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=j.Util.falseFn,a.onmousemove=j.Util.falseFn,a.onload=j.bind(this.fire,this,"load"),this.options.crossOrigin&&(a.crossOrigin=""),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(l){var m=this._map.getZoomScale(l.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;j.DomUtil.setTransform(this._image,a,m)},_reset:function(){var l=this._image,m=new j.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=m.getSize();j.DomUtil.setPosition(l,m.min),l.style.width=a.x+"px",l.style.height=a.y+"px"},_updateOpacity:function(){j.DomUtil.setOpacity(this._image,this.options.opacity)}}),j.imageOverlay=function(l,m,a){return new j.ImageOverlay(l,m,a)},j.Icon=j.Class.extend({initialize:function(a){j.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(l,m){var a=this._getIconUrl(l);if(!a){if("icon"===l){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var o=this._createImg(a,m&&"IMG"===m.tagName?m:null);return this._setIconStyles(o,l),o},_setIconStyles:function(l,p){var a=this.options,q=a[p+"Size"];"number"==typeof q&&(q=[q,q]);var m=j.point(q),o=j.point("shadow"===p&&a.shadowAnchor||a.iconAnchor||m&&m.divideBy(2,!0));l.className="leaflet-marker-"+p+" "+(a.className||""),o&&(l.style.marginLeft=-o.x+"px",l.style.marginTop=-o.y+"px"),m&&(l.style.width=m.x+"px",l.style.height=m.y+"px")},_createImg:function(e,a){return a=a||h.createElement("img"),a.src=e,a},_getIconUrl:function(a){return j.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),j.icon=function(a){return new j.Icon(a)},j.Icon.Default=j.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return j.Icon.Default.imagePath||(j.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||j.Icon.Default.imagePath)+j.Icon.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var e=j.DomUtil.create("div","leaflet-default-icon-path",h.body),a=j.DomUtil.getStyle(e,"background-image")||j.DomUtil.getStyle(e,"backgroundImage");return h.body.removeChild(e),0===a.indexOf("url")?a.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),j.Marker=j.Layer.extend({options:{icon:new j.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(a,i){j.setOptions(this,i),this._latlng=j.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var i=this._latlng;return this._latlng=j.latLng(a),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var l=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=l.icon.createIcon(this._icon),q=!1;a!==this._icon&&(this._icon&&this._removeIcon(),q=!0,l.title&&(a.title=l.title),l.alt&&(a.alt=l.alt)),j.DomUtil.addClass(a,p),l.keyboard&&(a.tabIndex="0"),this._icon=a,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var m=l.icon.createShadow(this._shadow),o=!1;m!==this._shadow&&(this._removeShadow(),o=!0),m&&(j.DomUtil.addClass(m,p),m.alt=""),this._shadow=m,l.opacity<1&&this._updateOpacity(),q&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),j.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&j.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){j.DomUtil.setPosition(this._icon,a),this._shadow&&j.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var i=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(j.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),j.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new j.Handler.MarkerDrag(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;j.DomUtil.setOpacity(this._icon,a),this._shadow&&j.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),j.marker=function(a,i){return new j.Marker(a,i)},j.DivIcon=j.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var a=e&&"DIV"===e.tagName?e:h.createElement("div"),m=this.options;if(a.innerHTML=m.html!==!1?m.html:"",m.bgPos){var l=j.point(m.bgPos);a.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}}),j.divIcon=function(a){return new j.DivIcon(a)},j.DivOverlay=j.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,i){j.setOptions(this,a),this._source=i},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&j.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&j.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(j.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(j.bind(j.DomUtil.remove,j.DomUtil,this._container),200)):j.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=j.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return !!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&j.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&j.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var a=this._contentNode,i="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof i){a.innerHTML=i}else{for(;a.hasChildNodes();){a.removeChild(a.firstChild)}a.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),o=j.point(this.options.offset),a=this._getAnchor();this._zoomAnimated?j.DomUtil.setPosition(this._container,l.add(a)):o=o.add(l).add(a);var p=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=p+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}}),j.Popup=j.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){j.DivOverlay.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof j.Path||this._source.on("preclick",j.DomEvent.stopPropagation))},onRemove:function(a){j.DivOverlay.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof j.Path||this._source.off("preclick",j.DomEvent.stopPropagation))},getEvents:function(){var a=j.DivOverlay.prototype.getEvents.call(this);return("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var l="leaflet-popup",m=this._container=j.DomUtil.create("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var a=this._closeButton=j.DomUtil.create("a",l+"-close-button",m);a.href="#close",a.innerHTML="&#215;",j.DomEvent.on(a,"click",this._onCloseButtonClick,this)}var o=this._wrapper=j.DomUtil.create("div",l+"-content-wrapper",m);this._contentNode=j.DomUtil.create("div",l+"-content",o),j.DomEvent.disableClickPropagation(o).disableScrollPropagation(this._contentNode).on(o,"contextmenu",j.DomEvent.stopPropagation),this._tipContainer=j.DomUtil.create("div",l+"-tip-container",m),this._tip=j.DomUtil.create("div",l+"-tip",this._tipContainer)},_updateLayout:function(){var l=this._contentNode,p=l.style;p.width="",p.whiteSpace="nowrap";var a=l.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),p.width=a+1+"px",p.whiteSpace="",p.height="";var q=l.offsetHeight,m=this.options.maxHeight,o="leaflet-popup-scrolled";m&&q>m?(p.height=m+"px",j.DomUtil.addClass(l,o)):j.DomUtil.removeClass(l,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var m=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),a=this._getAnchor();j.DomUtil.setPosition(this._container,m.add(a))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var B=this._map,w=parseInt(j.DomUtil.getStyle(this._container,"marginBottom"),10)||0,q=this._container.offsetHeight+w,o=this._containerWidth,C=new j.Point(this._containerLeft,-q-this._containerBottom);C._add(j.DomUtil.getPosition(this._container));var m=B.layerPointToContainerPoint(C),z=j.point(this.options.autoPanPadding),v=j.point(this.options.autoPanPaddingTopLeft||z),p=j.point(this.options.autoPanPaddingBottomRight||z),A=B.getSize(),y=0,x=0;m.x+o+p.x>A.x&&(y=m.x+o-A.x+p.x),m.x-y-v.x<0&&(y=m.x-v.x),m.y+q+p.y>A.y&&(x=m.y+q-A.y+p.y),m.y-x-v.y<0&&(x=m.y-v.y),(y||x)&&B.fire("autopanstart").panBy([y,x])}},_onCloseButtonClick:function(a){this._close(),j.DomEvent.stop(a)},_getAnchor:function(){return j.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),j.popup=function(a,i){return new j.Popup(a,i)},j.Map.mergeOptions({closePopupOnClick:!0}),j.Map.include({openPopup:function(l,m,a){return l instanceof j.Popup||(l=new j.Popup(a).setContent(l)),m&&l.setLatLng(m),this.hasLayer(l)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=l,this.addLayer(l))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),j.Layer.include({bindPopup:function(a,i){return a instanceof j.Popup?(j.setOptions(a,i),this._popup=a,a._source=this):(this._popup&&!i||(this._popup=new j.Popup(i,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l,m){if(l instanceof j.Layer||(m=l,l=this),l instanceof j.FeatureGroup){for(var a in this._layers){l=this._layers[a];break}}return m||(m=l.getCenter?l.getCenter():l.getLatLng()),this._popup&&this._map&&(this._popup._source=l,this._popup.update(),this._map.openPopup(this._popup,m)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return !!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var i=a.layer||a.target;if(this._popup&&this._map){return j.DomEvent.stop(a),i instanceof j.Path?void this.openPopup(a.layer||a.target,a.latlng):void (this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,a.latlng))}},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),j.Tooltip=j.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(a){j.DivOverlay.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){j.DivOverlay.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=j.DivOverlay.prototype.getEvents.call(this);return j.Browser.touch&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var a="leaflet-tooltip",i=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=j.DomUtil.create("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(z){var w=this._map,q=this._container,o=w.latLngToContainerPoint(w.getCenter()),A=w.layerPointToContainerPoint(z),m=this.options.direction,x=q.offsetWidth,v=q.offsetHeight,p=j.point(this.options.offset),y=this._getAnchor();"top"===m?z=z.add(j.point(-x/2+p.x,-v+p.y+y.y,!0)):"bottom"===m?z=z.subtract(j.point(x/2-p.x,-p.y,!0)):"center"===m?z=z.subtract(j.point(x/2+p.x,v/2-y.y+p.y,!0)):"right"===m||"auto"===m&&A.x<o.x?(m="right",z=z.add(j.point(p.x+y.x,y.y-v/2+p.y,!0))):(m="left",z=z.subtract(j.point(x+y.x-p.x,v/2-y.y-p.y,!0))),j.DomUtil.removeClass(q,"leaflet-tooltip-right"),j.DomUtil.removeClass(q,"leaflet-tooltip-left"),j.DomUtil.removeClass(q,"leaflet-tooltip-top"),j.DomUtil.removeClass(q,"leaflet-tooltip-bottom"),j.DomUtil.addClass(q,"leaflet-tooltip-"+m),j.DomUtil.setPosition(q,z)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&j.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){var i=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(i)},_getAnchor:function(){return j.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),j.tooltip=function(a,i){return new j.Tooltip(a,i)},j.Map.include({openTooltip:function(l,m,a){return l instanceof j.Tooltip||(l=new j.Tooltip(a).setContent(l)),m&&l.setLatLng(m),this.hasLayer(l)?this:this.addLayer(l)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),j.Layer.include({bindTooltip:function(a,i){return a instanceof j.Tooltip?(j.setOptions(a,i),this._tooltip=a,a._source=this):(this._tooltip&&!i||(this._tooltip=j.tooltip(i,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(l||!this._tooltipHandlersAdded){var m=l?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),j.Browser.touch&&(a.click=this._openTooltip)),this[m](a),this._tooltipHandlersAdded=!l}},openTooltip:function(l,m){if(l instanceof j.Layer||(m=l,l=this),l instanceof j.FeatureGroup){for(var a in this._layers){l=this._layers[a];break}}return m||(m=l.getCenter?l.getCenter():l.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=l,this._tooltip.update(),this._map.openTooltip(this._tooltip,m),this._tooltip.options.interactive&&this._tooltip._container&&(j.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(j.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){var i=a.layer||a.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?a.latlng:c)},_moveTooltip:function(l){var m,a,o=l.latlng;this._tooltip.options.sticky&&l.originalEvent&&(m=this._map.mouseEventToContainerPoint(l.originalEvent),a=this._map.containerPointToLayerPoint(m),o=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(o)}}),j.LayerGroup=j.Layer.extend({initialize:function(l){this._layers={};var m,a;if(l){for(m=0,a=l.length;m<a;m++){this.addLayer(l[m])}}},addLayer:function(a){var i=this.getLayerId(a);return this._layers[i]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var i=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(a){return !!a&&(a in this._layers||this.getLayerId(a) in this._layers)},clearLayers:function(){for(var a in this._layers){this.removeLayer(this._layers[a])}return this},invoke:function(l){var m,a,o=Array.prototype.slice.call(arguments,1);for(m in this._layers){a=this._layers[m],a[l]&&a[l].apply(a,o)}return this},onAdd:function(a){for(var i in this._layers){a.addLayer(this._layers[i])}},onRemove:function(a){for(var i in this._layers){a.removeLayer(this._layers[i])}},eachLayer:function(l,m){for(var a in this._layers){l.call(m,this._layers[a])}return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var i in this._layers){a.push(this._layers[i])}return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return j.stamp(a)}}),j.layerGroup=function(a){return new j.LayerGroup(a)},j.FeatureGroup=j.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),j.LayerGroup.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),j.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new j.LatLngBounds;for(var m in this._layers){var a=this._layers[m];l.extend(a.getBounds?a.getBounds():a.getLatLng())}return l}}),j.featureGroup=function(a){return new j.FeatureGroup(a)},j.Renderer=j.Layer.extend({options:{padding:0.1},initialize:function(a){j.setOptions(this,a),j.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&j.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){j.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(x,v){var q=this._map.getZoomScale(v,this._zoom),o=j.DomUtil.getPosition(this._container),y=this._map.getSize().multiplyBy(0.5+this.options.padding),m=this._map.project(this._center,v),w=this._map.project(x,v),u=w.subtract(m),p=y.multiplyBy(-q).add(o).add(y).subtract(u);j.Browser.any3d?j.DomUtil.setTransform(this._container,p,q):j.DomUtil.setPosition(this._container,p)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers){this._layers[a]._reset()}},_onZoomEnd:function(){for(var a in this._layers){this._layers[a]._project()}},_updatePaths:function(){for(var a in this._layers){this._layers[a]._update()}},_update:function(){var l=this.options.padding,m=this._map.getSize(),a=this._map.containerPointToLayerPoint(m.multiplyBy(-l)).round();this._bounds=new j.Bounds(a,a.add(m.multiplyBy(1+2*l)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),j.Map.include({getRenderer:function(a){var i=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this.options.preferCanvas&&j.canvas()||j.svg()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(a){if("overlayPane"===a||a===c){return !1}var i=this._paneRenderers[a];return i===c&&(i=j.SVG&&j.svg({pane:a})||j.Canvas&&j.canvas({pane:a}),this._paneRenderers[a]=i),i}}),j.Path=j.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return j.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(j.Browser.touch?10:0)}}),j.LineUtil={simplify:function(l,m){if(!m||!l.length){return l.slice()}var a=m*m;return l=this._reducePoints(l,a),l=this._simplifyDP(l,a)},pointToSegmentDistance:function(l,m,a){return Math.sqrt(this._sqClosestPointOnSegment(l,m,a,!0))},closestPointOnSegment:function(l,m,a){return this._sqClosestPointOnSegment(l,m,a)},_simplifyDP:function(l,q){var v=l.length,u=typeof Uint8Array!=c+""?Uint8Array:Array,m=new u(v);m[0]=m[v-1]=1,this._simplifyDPStep(l,m,q,0,v-1);var p,i=[];for(p=0;p<v;p++){m[p]&&i.push(l[p])}return i},_simplifyDPStep:function(x,v,q,p,m){var y,l,w,u=0;for(l=p+1;l<=m-1;l++){w=this._sqClosestPointOnSegment(x[l],x[p],x[m],!0),w>u&&(y=l,u=w)}u>q&&(v[y]=1,this._simplifyDPStep(x,v,q,p,y),this._simplifyDPStep(x,v,q,y,m))},_reducePoints:function(l,p){for(var a=[l[0]],r=1,q=0,m=l.length;r<m;r++){this._sqDist(l[r],l[q])>p&&(a.push(l[r]),q=r)}return q<m-1&&a.push(l[m-1]),a},clipSegment:function(z,x,v,q,p){var A,m,y,w=q?this._lastCode:this._getBitCode(z,v),u=this._getBitCode(x,v);for(this._lastCode=u;;){if(!(w|u)){return[z,x]}if(w&u){return !1}A=w||u,m=this._getEdgeIntersection(z,x,A,v,p),y=this._getBitCode(m,v),A===w?(z=m,w=y):(x=m,u=y)}},_getEdgeIntersection:function(A,w,q,o,B){var m,y,v=w.x-A.x,p=w.y-A.y,z=o.min,x=o.max;return 8&q?(m=A.x+v*(x.y-A.y)/p,y=x.y):4&q?(m=A.x+v*(z.y-A.y)/p,y=z.y):2&q?(m=x.x,y=A.y+p*(x.x-A.x)/v):1&q&&(m=z.x,y=A.y+p*(z.x-A.x)/v),new j.Point(m,y,B)},_getBitCode:function(l,m){var a=0;return l.x<m.min.x?a|=1:l.x>m.max.x&&(a|=2),l.y<m.min.y?a|=4:l.y>m.max.y&&(a|=8),a},_sqDist:function(l,m){var a=m.x-l.x,o=m.y-l.y;return a*a+o*o},_sqClosestPointOnSegment:function(z,w,q,o){var A,m=w.x,x=w.y,v=q.x-m,p=q.y-x,y=v*v+p*p;return y>0&&(A=((z.x-m)*v+(z.y-x)*p)/y,A>1?(m=q.x,x=q.y):A>0&&(m+=v*A,x+=p*A)),v=z.x-m,p=z.y-x,o?v*v+p*p:new j.Point(m,x)}},j.Polyline=j.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,i){j.setOptions(this,i),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return !this._latlngs.length},closestLayerPoint:function(B){for(var w,q,o=1/0,C=null,m=j.LineUtil._sqClosestPointOnSegment,z=0,v=this._parts.length;z<v;z++){for(var p=this._parts[z],A=1,y=p.length;A<y;A++){w=p[A-1],q=p[A];var x=m(B,w,q,!0);x<o&&(o=x,C=m(B,w,q))}}return C&&(C.distance=Math.sqrt(o)),C},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var x,v,q,p,m,y,l,w=this._rings[0],u=w.length;if(!u){return null}for(x=0,v=0;x<u-1;x++){v+=w[x].distanceTo(w[x+1])/2}if(0===v){return this._map.layerPointToLatLng(w[0])}for(x=0,p=0;x<u-1;x++){if(m=w[x],y=w[x+1],q=m.distanceTo(y),p+=q,p>v){return l=(p-v)/q,this._map.layerPointToLatLng([y.x-l*(y.x-m.x),y.y-l*(y.y-m.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(a,i){return i=i||this._defaultShape(),a=j.latLng(a),i.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new j.LatLngBounds,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return j.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var o=[],a=j.Polyline._flat(l),p=0,m=l.length;p<m;p++){a?(o[p]=j.latLng(l[p]),this._bounds.extend(o[p])):o[p]=this._convertLatLngs(l[p])}return o},_project:function(){var l=new j.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l);var m=this._clickTolerance(),a=new j.Point(m,m);this._bounds.isValid()&&l.isValid()&&(l.min._subtract(a),l.max._add(a),this._pxBounds=l)},_projectLatlngs:function(o,u,m){var v,p,q=o[0] instanceof j.LatLng,l=o.length;if(q){for(p=[],v=0;v<l;v++){p[v]=this._map.latLngToLayerPoint(o[v]),m.extend(p[v])}u.push(p)}else{for(v=0;v<l;v++){this._projectLatlngs(o[v],u,m)}}},_clipPoints:function(){var x=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(x)){if(this.options.noClip){return void (this._parts=this._rings)}var v,q,o,y,m,w,u,p=this._parts;for(v=0,o=0,y=this._rings.length;v<y;v++){for(u=this._rings[v],q=0,m=u.length;q<m-1;q++){w=j.LineUtil.clipSegment(u[q],u[q+1],x,q,!0),w&&(p[o]=p[o]||[],p[o].push(w[0]),w[1]===u[q+1]&&q!==m-2||(p[o].push(w[1]),o++))}}}},_simplifyPoints:function(){for(var l=this._parts,m=this.options.smoothFactor,a=0,o=l.length;a<o;a++){l[a]=j.LineUtil.simplify(l[a],m)}},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),j.polyline=function(a,i){return new j.Polyline(a,i)},j.Polyline._flat=function(a){return !j.Util.isArray(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]},j.PolyUtil={},j.PolyUtil.clipPolygon=function(E,y,w){var p,F,o,B,x,v,D,A,z,C=[1,4,2,8],q=j.LineUtil;for(F=0,D=E.length;F<D;F++){E[F]._code=q._getBitCode(E[F],y)}for(B=0;B<4;B++){for(A=C[B],p=[],F=0,D=E.length,o=D-1;F<D;o=F++){x=E[F],v=E[o],x._code&A?v._code&A||(z=q._getEdgeIntersection(v,x,A,y,w),z._code=q._getBitCode(z,y),p.push(z)):(v._code&A&&(z=q._getEdgeIntersection(v,x,A,y,w),z._code=q._getBitCode(z,y),p.push(z)),p.push(x))}E=p}return E},j.Polygon=j.Polyline.extend({options:{fill:!0},isEmpty:function(){return !this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var B,y,w,q,p,C,m,z,x,v=this._rings[0],A=v.length;if(!A){return null}for(C=m=z=0,B=0,y=A-1;B<A;y=B++){w=v[B],q=v[y],p=w.y*q.x-q.y*w.x,m+=(w.x+q.x)*p,z+=(w.y+q.y)*p,C+=3*p}return x=0===C?v[0]:[m/C,z/C],this._map.layerPointToLatLng(x)},_convertLatLngs:function(l){var m=j.Polyline.prototype._convertLatLngs.call(this,l),a=m.length;return a>=2&&m[0] instanceof j.LatLng&&m[0].equals(m[a-1])&&m.pop(),m},_setLatLngs:function(a){j.Polyline.prototype._setLatLngs.call(this,a),j.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return j.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,p=this.options.weight,a=new j.Point(p,p);if(l=new j.Bounds(l.min.subtract(a),l.max.add(a)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(l)){if(this.options.noClip){return void (this._parts=this._rings)}for(var q,m=0,o=this._rings.length;m<o;m++){q=j.PolyUtil.clipPolygon(this._rings[m],l,!0),q.length&&this._parts.push(q)}}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),j.polygon=function(a,i){return new j.Polygon(a,i)},j.Rectangle=j.Polygon.extend({initialize:function(a,i){j.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),i)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=j.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),j.rectangle=function(a,i){return new j.Rectangle(a,i)},j.CircleMarker=j.Path.extend({options:{fill:!0,radius:10},initialize:function(a,i){j.setOptions(this,i),this._latlng=j.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=j.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var i=a&&a.radius||this._radius;return j.Path.prototype.setStyle.call(this,a),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,m=this._radiusY||l,a=this._clickTolerance(),o=[l+a,m+a];this._pxBounds=new j.Bounds(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),j.circleMarker=function(a,i){return new j.CircleMarker(a,i)},j.Circle=j.CircleMarker.extend({initialize:function(l,m,a){if("number"==typeof m&&(m=j.extend({},a,{radius:m})),j.setOptions(this,m),this._latlng=j.latLng(l),isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new j.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:j.Path.prototype.setStyle,_project:function(){var B=this._latlng.lng,w=this._latlng.lat,q=this._map,o=q.options.crs;if(o.distance===j.CRS.Earth.distance){var C=Math.PI/180,m=this._mRadius/j.CRS.Earth.R/C,z=q.project([w+m,B]),v=q.project([w-m,B]),p=z.add(v).divideBy(2),A=q.unproject(p).lat,y=Math.acos((Math.cos(m*C)-Math.sin(w*C)*Math.sin(A*C))/(Math.cos(w*C)*Math.cos(A*C)))/C;(isNaN(y)||0===y)&&(y=m/Math.cos(Math.PI/180*w)),this._point=p.subtract(q.getPixelOrigin()),this._radius=isNaN(y)?0:Math.max(Math.round(p.x-q.project([A,B-y]).x),1),this._radiusY=Math.max(Math.round(p.y-z.y),1)}else{var x=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=q.latLngToLayerPoint(this._latlng),this._radius=this._point.x-q.latLngToLayerPoint(x).x}this._updateBounds()}}),j.circle=function(l,m,a){return new j.Circle(l,m,a)},j.SVG=j.Renderer.extend({getEvents:function(){var a=j.Renderer.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=j.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=j.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){j.Renderer.prototype._update.call(this);var l=this._bounds,m=l.getSize(),a=this._container;this._svgSize&&this._svgSize.equals(m)||(this._svgSize=m,a.setAttribute("width",m.x),a.setAttribute("height",m.y)),j.DomUtil.setPosition(a,l.min),a.setAttribute("viewBox",[l.min.x,l.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(a){var i=a._path=j.SVG.create("path");a.options.className&&j.DomUtil.addClass(i,a.options.className),a.options.interactive&&j.DomUtil.addClass(i,"leaflet-interactive"),this._updateStyle(a),this._layers[j.stamp(a)]=a},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){j.DomUtil.remove(a._path),a.removeInteractiveTarget(a._path),delete this._layers[j.stamp(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(l){var m=l._path,a=l.options;m&&(a.stroke?(m.setAttribute("stroke",a.color),m.setAttribute("stroke-opacity",a.opacity),m.setAttribute("stroke-width",a.weight),m.setAttribute("stroke-linecap",a.lineCap),m.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?m.setAttribute("stroke-dasharray",a.dashArray):m.removeAttribute("stroke-dasharray"),a.dashOffset?m.setAttribute("stroke-dashoffset",a.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),a.fill?(m.setAttribute("fill",a.fillColor||a.color),m.setAttribute("fill-opacity",a.fillOpacity),m.setAttribute("fill-rule",a.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(a,i){this._setPath(a,j.SVG.pointsToPath(a._parts,i))},_updateCircle:function(l){var p=l._point,a=l._radius,r=l._radiusY||a,q="a"+a+","+r+" 0 1,0 ",m=l._empty()?"M0 0":"M"+(p.x-a)+","+p.y+q+2*a+",0 "+q+2*-a+",0 ";this._setPath(l,m)},_setPath:function(a,i){a._path.setAttribute("d",i)},_bringToFront:function(a){j.DomUtil.toFront(a._path)},_bringToBack:function(a){j.DomUtil.toBack(a._path)}}),j.extend(j.SVG,{create:function(a){return h.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(x,v){var q,o,y,m,w,u,p="";for(q=0,y=x.length;q<y;q++){for(w=x[q],o=0,m=w.length;o<m;o++){u=w[o],p+=(o?"L":"M")+u.x+" "+u.y}p+=v?j.Browser.svg?"z":"x":""}return p||"M0 0"}}),j.Browser.svg=!(!h.createElementNS||!j.SVG.create("svg").createSVGRect),j.svg=function(a){return j.Browser.svg||j.Browser.vml?new j.SVG(a):null},j.Browser.vml=!j.Browser.svg&&function(){try{var e=h.createElement("div");e.innerHTML='<v:shape adj="1"/>';var a=e.firstChild;return a.style.behavior="url(#default#VML)",a&&"object"==typeof a.adj}catch(e){return !1}}(),j.SVG.include(j.Browser.vml?{_initContainer:function(){this._container=j.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(j.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var i=a._container=j.SVG.create("shape");j.DomUtil.addClass(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",a._path=j.SVG.create("path"),i.appendChild(a._path),this._updateStyle(a),this._layers[j.stamp(a)]=a},_addPath:function(a){var i=a._container;this._container.appendChild(i),a.options.interactive&&a.addInteractiveTarget(i)},_removePath:function(a){var i=a._container;j.DomUtil.remove(i),a.removeInteractiveTarget(i),delete this._layers[j.stamp(a)]},_updateStyle:function(l){var o=l._stroke,a=l._fill,p=l.options,m=l._container;m.stroked=!!p.stroke,m.filled=!!p.fill,p.stroke?(o||(o=l._stroke=j.SVG.create("stroke")),m.appendChild(o),o.weight=p.weight+"px",o.color=p.color,o.opacity=p.opacity,p.dashArray?o.dashStyle=j.Util.isArray(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=p.lineCap.replace("butt","flat"),o.joinstyle=p.lineJoin):o&&(m.removeChild(o),l._stroke=null),p.fill?(a||(a=l._fill=j.SVG.create("fill")),m.appendChild(a),a.color=p.fillColor||p.color,a.opacity=p.fillOpacity):a&&(m.removeChild(a),l._fill=null)},_updateCircle:function(l){var m=l._point.round(),a=Math.round(l._radius),o=Math.round(l._radiusY||a);this._setPath(l,l._empty()?"M0 0":"AL "+m.x+","+m.y+" "+a+","+o+" 0,23592600")},_setPath:function(a,i){a._path.v=i},_bringToFront:function(a){j.DomUtil.toFront(a._container)},_bringToBack:function(a){j.DomUtil.toBack(a._container)}}:{}),j.Browser.vml&&(j.SVG.create=function(){try{return h.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return h.createElement("<lvml:"+e+' class="lvml">')}}catch(a){return function(e){return h.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),j.Canvas=j.Renderer.extend({getEvents:function(){var a=j.Renderer.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){j.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=h.createElement("canvas");j.DomEvent.on(a,"mousemove",j.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var i in this._layers){a=this._layers[i],a._update()}this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},j.Renderer.prototype._update.call(this);var l=this._bounds,m=this._container,a=l.getSize(),o=j.Browser.retina?2:1;j.DomUtil.setPosition(m,l.min),m.width=o*a.x,m.height=o*a.y,m.style.width=a.x+"px",m.style.height=a.y+"px",j.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){j.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[j.stamp(a)]=a;var i=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(l){var m=l._order,a=m.next,o=m.prev;a?a.prev=o:this._drawLast=o,o?o.next=a:this._drawFirst=a,delete l._order,delete this._layers[j.stamp(l)],this._requestRedraw(l)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(l){if(l.options.dashArray){var m,a=l.options.dashArray.split(","),o=[];for(m=0;m<a.length;m++){o.push(Number(a[m]))}l.options._dashArray=o}},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||j.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(a){var i=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j.Bounds,this._redrawBounds.extend(a._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(a._pxBounds.max.add([i,i]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var i=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,i.x,i.y)}else{this._ctx.clearRect(0,0,this._container.width,this._container.height)}},_draw:function(){var l,m=this._redrawBounds;if(this._ctx.save(),m){var a=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next){l=o.layer,(!m||l._pxBounds&&l._pxBounds.intersects(m))&&l._updatePath()}this._drawing=!1,this._ctx.restore()},_updatePoly:function(x,v){if(this._drawing){var q,p,m,y,l=x._parts,w=l.length,u=this._ctx;if(w){for(this._drawnLayers[x._leaflet_id]=x,u.beginPath(),u.setLineDash&&u.setLineDash(x.options&&x.options._dashArray||[]),q=0;q<w;q++){for(p=0,m=l[q].length;p<m;p++){y=l[q][p],u[p?"lineTo":"moveTo"](y.x,y.y)}v&&u.closePath()}this._fillStroke(u,x)}}},_updateCircle:function(l){if(this._drawing&&!l._empty()){var m=l._point,a=this._ctx,q=l._radius,p=(l._radiusY||q)/q;this._drawnLayers[l._leaflet_id]=l,1!==p&&(a.save(),a.scale(1,p)),a.beginPath(),a.arc(m.x,m.y/p,q,0,2*Math.PI,!1),1!==p&&a.restore(),this._fillStroke(a,l)}},_fillStroke:function(l,m){var a=m.options;a.fill&&(l.globalAlpha=a.fillOpacity,l.fillStyle=a.fillColor||a.color,l.fill(a.fillRule||"evenodd")),a.stroke&&0!==a.weight&&(l.globalAlpha=a.opacity,l.lineWidth=a.weight,l.strokeStyle=a.color,l.lineCap=a.lineCap,l.lineJoin=a.lineJoin,l.stroke())},_onClick:function(l){for(var o,a,p=this._map.mouseEventToLayerPoint(l),m=this._drawFirst;m;m=m.next){o=m.layer,o.options.interactive&&o._containsPoint(p)&&!this._map._draggableMoved(o)&&(a=o)}a&&(j.DomEvent._fakeStop(l),this._fireEvent([a],l))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,i)}},_handleMouseOut:function(a){var i=this._hoveredLayer;i&&(j.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([i],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(l,o){for(var a,p,m=this._drawFirst;m;m=m.next){a=m.layer,a.options.interactive&&a._containsPoint(o)&&(p=a)}p!==this._hoveredLayer&&(this._handleMouseOut(l),p&&(j.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([p],l,"mouseover"),this._hoveredLayer=p)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],l)},_fireEvent:function(l,m,a){this._map._fireDOMEvent(m,a||m.type,l)},_bringToFront:function(l){var m=l._order,a=m.next,o=m.prev;a&&(a.prev=o,o?o.next=a:a&&(this._drawFirst=a),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(l))},_bringToBack:function(l){var m=l._order,a=m.next,o=m.prev;o&&(o.next=a,a?a.prev=o:o&&(this._drawLast=o),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(l))}}),j.Browser.canvas=function(){return !!h.createElement("canvas").getContext}(),j.canvas=function(a){return j.Browser.canvas?new j.Canvas(a):null},j.Polyline.prototype._containsPoint=function(x,v){var q,o,y,m,w,u,p=this._clickTolerance();if(!this._pxBounds.contains(x)){return !1}for(q=0,m=this._parts.length;q<m;q++){for(u=this._parts[q],o=0,w=u.length,y=w-1;o<w;y=o++){if((v||0!==o)&&j.LineUtil.pointToSegmentDistance(x,u[y],u[o])<=p){return !0}}}return !1},j.Polygon.prototype._containsPoint=function(z){var w,q,o,A,m,x,v,p,y=!1;if(!this._pxBounds.contains(z)){return !1}for(A=0,v=this._parts.length;A<v;A++){for(w=this._parts[A],m=0,p=w.length,x=p-1;m<p;x=m++){q=w[m],o=w[x],q.y>z.y!=o.y>z.y&&z.x<(o.x-q.x)*(z.y-q.y)/(o.y-q.y)+q.x&&(y=!y)}}return y||j.Polyline.prototype._containsPoint.call(this,z,!0)},j.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},j.GeoJSON=j.FeatureGroup.extend({initialize:function(a,i){j.setOptions(this,i),this._layers={},a&&this.addData(a)},addData:function(o){var u,m,v,p=j.Util.isArray(o)?o:o.features;if(p){for(u=0,m=p.length;u<m;u++){v=p[u],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v)}return this}var q=this.options;if(q.filter&&!q.filter(o)){return this}var l=j.GeoJSON.geometryToLayer(o,q);return l?(l.feature=j.GeoJSON.asFeature(o),l.defaultOptions=l.options,this.resetStyle(l),q.onEachFeature&&q.onEachFeature(o,l),this.addLayer(l)):this},resetStyle:function(a){return a.options=j.Util.extend({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(i){this._setLayerStyle(i,a)},this)},_setLayerStyle:function(a,i){"function"==typeof i&&(i=i(a.feature)),a.setStyle&&a.setStyle(i)}}),j.extend(j.GeoJSON,{geometryToLayer:function(B,w){var q,o,C,m,z="Feature"===B.type?B.geometry:B,v=z?z.coordinates:null,p=[],A=w&&w.pointToLayer,y=w&&w.coordsToLatLng||this.coordsToLatLng;if(!v&&!z){return null}switch(z.type){case"Point":return q=y(v),A?A(B,q):new j.Marker(q);case"MultiPoint":for(C=0,m=v.length;C<m;C++){q=y(v[C]),p.push(A?A(B,q):new j.Marker(q))}return new j.FeatureGroup(p);case"LineString":case"MultiLineString":return o=this.coordsToLatLngs(v,"LineString"===z.type?0:1,y),new j.Polyline(o,w);case"Polygon":case"MultiPolygon":return o=this.coordsToLatLngs(v,"Polygon"===z.type?1:2,y),new j.Polygon(o,w);case"GeometryCollection":for(C=0,m=z.geometries.length;C<m;C++){var x=this.geometryToLayer({geometry:z.geometries[C],type:"Feature",properties:B.properties},w);x&&p.push(x)}return new j.FeatureGroup(p);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new j.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(l,q,a){for(var v,u=[],m=0,p=l.length;m<p;m++){v=q?this.coordsToLatLngs(l[m],q-1,a):(a||this.coordsToLatLng)(l[m]),u.push(v)}return u},latLngToCoords:function(a){return a.alt!==c?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(l,p,a){for(var q=[],m=0,o=l.length;m<o;m++){q.push(p?j.GeoJSON.latLngsToCoords(l[m],p-1,a):j.GeoJSON.latLngToCoords(l[m]))}return !p&&a&&q.push(q[0]),q},getFeature:function(a,i){return a.feature?j.extend({},a.feature,{geometry:i}):j.GeoJSON.asFeature(i)},asFeature:function(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var b={toGeoJSON:function(){return j.GeoJSON.getFeature(this,{type:"Point",coordinates:j.GeoJSON.latLngToCoords(this.getLatLng())})}};j.Marker.include(b),j.Circle.include(b),j.CircleMarker.include(b),j.Polyline.prototype.toGeoJSON=function(){var a=!j.Polyline._flat(this._latlngs),i=j.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return j.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:i})},j.Polygon.prototype.toGeoJSON=function(){var l=!j.Polyline._flat(this._latlngs),m=l&&!j.Polyline._flat(this._latlngs[0]),a=j.GeoJSON.latLngsToCoords(this._latlngs,m?2:l?1:0,!0);return l||(a=[a]),j.GeoJSON.getFeature(this,{type:(m?"Multi":"")+"Polygon",coordinates:a})},j.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(i){a.push(i.toGeoJSON().geometry.coordinates)}),j.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===l){return this.toMultiPoint()}var m="GeometryCollection"===l,a=[];return this.eachLayer(function(e){if(e.toGeoJSON){var i=e.toGeoJSON();a.push(m?i.geometry:j.GeoJSON.asFeature(i))}}),m?j.GeoJSON.getFeature(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}}),j.geoJSON=function(a,i){return new j.GeoJSON(a,i)},j.geoJson=j.geoJSON,j.Draggable=j.Evented.extend({options:{clickTolerance:3},statics:{START:j.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(l,m,a){this._element=l,this._dragStartTarget=m||l,this._preventOutline=a},enable:function(){this._enabled||(j.DomEvent.on(this._dragStartTarget,j.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(j.Draggable._dragging===this&&this.finishDrag(),j.DomEvent.off(this._dragStartTarget,j.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!j.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(j.Draggable._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(j.Draggable._dragging=this,this._preventOutline&&j.DomUtil.preventOutline(this._element),j.DomUtil.disableImageDrag(),j.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var a=e.touches?e.touches[0]:e;this._startPoint=new j.Point(a.clientX,a.clientY),j.DomEvent.on(h,j.Draggable.MOVE[e.type],this._onMove,this).on(h,j.Draggable.END[e.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated&&this._enabled){if(a.touches&&a.touches.length>1){return void (this._moved=!0)}var m=a.touches&&1===a.touches.length?a.touches[0]:a,e=new j.Point(m.clientX,m.clientY),l=e.subtract(this._startPoint);(l.x||l.y)&&(Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(j.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=j.DomUtil.getPosition(this._element).subtract(l),j.DomUtil.addClass(h.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,d.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),j.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,j.Util.cancelAnimFrame(this._animRequest),this._lastEvent=a,this._animRequest=j.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),j.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){!a._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){j.DomUtil.removeClass(h.body,"leaflet-dragging"),this._lastTarget&&(j.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in j.Draggable.MOVE){j.DomEvent.off(h,j.Draggable.MOVE[a],this._onMove,this).off(h,j.Draggable.END[a],this._onUp,this)}j.DomUtil.enableImageDrag(),j.DomUtil.enableTextSelection(),this._moved&&this._moving&&(j.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,j.Draggable._dragging=!1}}),j.Handler=j.Class.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return !!this._enabled}}),j.Map.mergeOptions({dragging:!0,inertia:!j.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0}),j.Map.Drag=j.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new j.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}j.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){j.DomUtil.removeClass(this._map._container,"leaflet-grab"),j.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=j.latLngBounds(this._map.options.maxBounds);this._offsetLimit=j.bounds(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var m=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(m),m-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",l).fire("drag",l)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,i){return a-(a-i)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;a.x<i.min.x&&(a.x=this._viscousLimit(a.x,i.min.x)),a.y<i.min.y&&(a.y=this._viscousLimit(a.y,i.min.y)),a.x>i.max.x&&(a.x=this._viscousLimit(a.x,i.max.x)),a.y>i.max.y&&(a.y=this._viscousLimit(a.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var l=this._worldWidth,q=Math.round(l/2),a=this._initialWorldOffset,v=this._draggable._newPos.x,u=(v-q+a)%l+q-a,m=(v+q+a)%l-q-a,p=Math.abs(u+a)<Math.abs(m+a)?u:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(C){var w=this._map,q=w.options,o=!q.inertia||this._times.length<2;if(w.fire("dragend",C),o){w.fire("moveend")}else{var D=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1000,z=q.easeLinearity,v=D.multiplyBy(z/m),p=v.distanceTo([0,0]),B=Math.min(q.inertiaMaxSpeed,p),y=v.multiplyBy(B/p),x=B/(q.inertiaDeceleration*z),A=y.multiplyBy(-x/2).round();A.x||A.y?(A=w._limitOffset(A,w.options.maxBounds),j.Util.requestAnimFrame(function(){w.panBy(A,{duration:x,easeLinearity:z,noMoveStart:!0,animate:!0})})):w.fire("moveend")}}}),j.Map.addInitHook("addHandler","dragging",j.Map.Drag),j.Map.mergeOptions({doubleClickZoom:!0}),j.Map.DoubleClickZoom=j.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var m=this._map,a=m.getZoom(),q=m.options.zoomDelta,p=l.originalEvent.shiftKey?a-q:a+q;"center"===m.options.doubleClickZoom?m.setZoom(p):m.setZoomAround(l.containerPoint,p)}}),j.Map.addInitHook("addHandler","doubleClickZoom",j.Map.DoubleClickZoom),j.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),j.Map.ScrollWheelZoom=j.Handler.extend({addHooks:function(){j.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){j.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var m=j.DomEvent.getWheelDelta(l),a=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var o=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(j.bind(this._performZoom,this),o),j.DomEvent.stop(l)},_performZoom:function(){var l=this._map,q=l.getZoom(),a=this._map.options.zoomSnap||0;l._stop();var v=this._delta/(4*this._map.options.wheelPxPerZoomLevel),u=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,m=a?Math.ceil(u/a)*a:u,p=l._limitZoom(q+(this._delta>0?m:-m))-q;this._delta=0,this._startTime=null,p&&("center"===l.options.scrollWheelZoom?l.setZoom(q+p):l.setZoomAround(this._lastMousePos,q+p))}}),j.Map.addInitHook("addHandler","scrollWheelZoom",j.Map.ScrollWheelZoom),j.extend(j.DomEvent,{_touchstart:j.Browser.msPointer?"MSPointerDown":j.Browser.pointer?"pointerdown":"touchstart",_touchend:j.Browser.msPointer?"MSPointerUp":j.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(B,w,q){function o(l){var r;if(j.Browser.pointer){if(!j.Browser.edge||"mouse"===l.pointerType){return}r=j.DomEvent._pointersCount}else{r=l.touches.length}if(!(r>1)){var a=Date.now(),s=a-(m||a);z=l.touches?l.touches[0]:l,v=s>0&&s<=p,m=a}}function C(e){if(v&&!z.cancelBubble){if(j.Browser.pointer){if(!j.Browser.edge||"mouse"===e.pointerType){return}var a,r,l={};for(r in z){a=z[r],l[r]=a&&a.bind?a.bind(z):a}z=l}z.type="dblclick",w(z),m=null}}var m,z,v=!1,p=250,A="_leaflet_",y=this._touchstart,x=this._touchend;return B[A+y+q]=o,B[A+x+q]=C,B[A+"dblclick"+q]=w,B.addEventListener(y,o,!1),B.addEventListener(x,C,!1),B.addEventListener("dblclick",w,!1),this},removeDoubleTapListener:function(l,p){var a="_leaflet_",q=l[a+this._touchstart+p],m=l[a+this._touchend+p],o=l[a+"dblclick"+p];return l.removeEventListener(this._touchstart,q,!1),l.removeEventListener(this._touchend,m,!1),j.Browser.edge||l.removeEventListener("dblclick",o,!1),this}}),j.extend(j.DomEvent,{POINTER_DOWN:j.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:j.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:j.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:j.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(l,m,a,o){return"touchstart"===m?this._addPointerStart(l,a,o):"touchmove"===m?this._addPointerMove(l,a,o):"touchend"===m&&this._addPointerEnd(l,a,o),this},removePointerListener:function(l,m,a){var o=l["_leaflet_"+m+a];return"touchstart"===m?l.removeEventListener(this.POINTER_DOWN,o,!1):"touchmove"===m?l.removeEventListener(this.POINTER_MOVE,o,!1):"touchend"===m&&(l.removeEventListener(this.POINTER_UP,o,!1),l.removeEventListener(this.POINTER_CANCEL,o,!1)),this},_addPointerStart:function(e,a,o){var l=j.bind(function(i){if("mouse"!==i.pointerType&&i.MSPOINTER_TYPE_MOUSE&&i.pointerType!==i.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(i.target.tagName)<0)){return}j.DomEvent.preventDefault(i)}this._handlePointer(i,a)},this);if(e["_leaflet_touchstart"+o]=l,e.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocListener){var m=j.bind(this._globalPointerUp,this);h.documentElement.addEventListener(this.POINTER_DOWN,j.bind(this._globalPointerDown,this),!0),h.documentElement.addEventListener(this.POINTER_MOVE,j.bind(this._globalPointerMove,this),!0),h.documentElement.addEventListener(this.POINTER_UP,m,!0),h.documentElement.addEventListener(this.POINTER_CANCEL,m,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(l,m){l.touches=[];for(var a in this._pointers){l.touches.push(this._pointers[a])}l.changedTouches=[l],m(l)},_addPointerMove:function(l,m,a){var o=j.bind(function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&this._handlePointer(e,m)},this);l["_leaflet_touchmove"+a]=o,l.addEventListener(this.POINTER_MOVE,o,!1)},_addPointerEnd:function(l,m,a){var o=j.bind(function(e){this._handlePointer(e,m)},this);l["_leaflet_touchend"+a]=o,l.addEventListener(this.POINTER_UP,o,!1),l.addEventListener(this.POINTER_CANCEL,o,!1)}}),j.Map.mergeOptions({touchZoom:j.Browser.touch&&!j.Browser.android23,bounceAtZoomLimits:!0}),j.Map.TouchZoom=j.Handler.extend({addHooks:function(){j.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),j.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){j.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),j.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var a=this._map;if(e.touches&&2===e.touches.length&&!a._animatingZoom&&!this._zooming){var m=a.mouseEventToContainerPoint(e.touches[0]),l=a.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),"center"!==a.options.touchZoom&&(this._pinchStartLatLng=a.containerPointToLatLng(m.add(l)._divideBy(2))),this._startDist=m.distanceTo(l),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),j.DomEvent.on(h,"touchmove",this._onTouchMove,this).on(h,"touchend",this._onTouchEnd,this),j.DomEvent.preventDefault(e)}},_onTouchMove:function(o){if(o.touches&&2===o.touches.length&&this._zooming){var u=this._map,m=u.mouseEventToContainerPoint(o.touches[0]),v=u.mouseEventToContainerPoint(o.touches[1]),p=m.distanceTo(v)/this._startDist;if(this._zoom=u.getScaleZoom(p,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&p<1||this._zoom>u.getMaxZoom()&&p>1)&&(this._zoom=u._limitZoom(this._zoom)),"center"===u.options.touchZoom){if(this._center=this._startLatLng,1===p){return}}else{var q=m._add(v)._divideBy(2)._subtract(this._centerPoint);if(1===p&&0===q.x&&0===q.y){return}this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(q),this._zoom)}this._moved||(u._moveStart(!0),this._moved=!0),j.Util.cancelAnimFrame(this._animRequest);var l=j.bind(u._move,u,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=j.Util.requestAnimFrame(l,this,!0),j.DomEvent.preventDefault(o)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,j.Util.cancelAnimFrame(this._animRequest),j.DomEvent.off(h,"touchmove",this._onTouchMove).off(h,"touchend",this._onTouchEnd),void (this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void (this._zooming=!1)}}),j.Map.addInitHook("addHandler","touchZoom",j.Map.TouchZoom),j.Map.mergeOptions({tap:!0,tapTolerance:15}),j.Map.Tap=j.Handler.extend({addHooks:function(){j.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){j.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(j.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1){return this._fireClick=!1,void clearTimeout(this._holdTimeout)}var a=e.touches[0],l=a.target;this._startPos=this._newPos=new j.Point(a.clientX,a.clientY),l.tagName&&"a"===l.tagName.toLowerCase()&&j.DomUtil.addClass(l,"leaflet-active"),this._holdTimeout=setTimeout(j.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",a))},this),1000),this._simulateEvent("mousedown",a),j.DomEvent.on(h,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),j.DomEvent.off(h,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var a=e.changedTouches[0],l=a.target;l&&l.tagName&&"a"===l.tagName.toLowerCase()&&j.DomUtil.removeClass(l,"leaflet-active"),this._simulateEvent("mouseup",a),this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var i=a.touches[0];this._newPos=new j.Point(i.clientX,i.clientY),this._simulateEvent("mousemove",i)},_simulateEvent:function(a,l){var e=h.createEvent("MouseEvents");e._simulated=!0,l.target._simulatedClick=!0,e.initMouseEvent(a,!0,!0,d,1,l.screenX,l.screenY,l.clientX,l.clientY,!1,!1,!1,!1,0,null),l.target.dispatchEvent(e)}}),j.Browser.touch&&!j.Browser.pointer&&j.Map.addInitHook("addHandler","tap",j.Map.Tap),j.Map.mergeOptions({boxZoom:!0}),j.Map.BoxZoom=j.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){j.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){j.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){return !(!a.shiftKey||1!==a.which&&1!==a.button)&&(this._resetState(),j.DomUtil.disableTextSelection(),j.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),void j.DomEvent.on(h,{contextmenu:j.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=j.DomUtil.create("div","leaflet-zoom-box",this._container),j.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var m=new j.Bounds(this._point,this._startPoint),a=m.getSize();j.DomUtil.setPosition(this._box,m.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(j.DomUtil.remove(this._box),j.DomUtil.removeClass(this._container,"leaflet-crosshair")),j.DomUtil.enableTextSelection(),j.DomUtil.enableImageDrag(),j.DomEvent.off(h,{contextmenu:j.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){setTimeout(j.bind(this._resetState,this),0);var i=new j.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),j.Map.addInitHook("addHandler","boxZoom",j.Map.BoxZoom),j.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),j.Map.Keyboard=j.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),j.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),j.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=h.body,m=h.documentElement,l=a.scrollTop||m.scrollTop,e=a.scrollLeft||m.scrollLeft;this._map._container.focus(),d.scrollTo(e,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var m,a,q=this._panKeys={},p=this.keyCodes;for(m=0,a=p.left.length;m<a;m++){q[p.left[m]]=[-1*l,0]}for(m=0,a=p.right.length;m<a;m++){q[p.right[m]]=[l,0]}for(m=0,a=p.down.length;m<a;m++){q[p.down[m]]=[0,l]}for(m=0,a=p.up.length;m<a;m++){q[p.up[m]]=[0,-1*l]}},_setZoomDelta:function(l){var m,a,q=this._zoomKeys={},p=this.keyCodes;for(m=0,a=p.zoomIn.length;m<a;m++){q[p.zoomIn[m]]=l}for(m=0,a=p.zoomOut.length;m<a;m++){q[p.zoomOut[m]]=-l}},_addHooks:function(){j.DomEvent.on(h,"keydown",this._onKeyDown,this)},_removeHooks:function(){j.DomEvent.off(h,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var m,a=l.keyCode,o=this._map;if(a in this._panKeys){if(o._panAnim&&o._panAnim._inProgress){return}m=this._panKeys[a],l.shiftKey&&(m=j.point(m).multiplyBy(3)),o.panBy(m),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds)}else{if(a in this._zoomKeys){o.setZoom(o.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[a])}else{if(27!==a){return}o.closePopup()}}j.DomEvent.stop(l)}}}),j.Map.addInitHook("addHandler","keyboard",j.Map.Keyboard),j.Handler.MarkerDrag=j.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new j.Draggable(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),j.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&j.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(l){var o=this._marker,a=o._shadow,p=j.DomUtil.getPosition(o._icon),m=o._map.layerPointToLatLng(p);a&&j.DomUtil.setPosition(a,p),o._latlng=m,l.latlng=m,l.oldLatLng=this._oldLatLng,o.fire("move",l).fire("drag",l)},_onDragEnd:function(a){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),j.Control=j.Class.extend({options:{position:"topright"},initialize:function(a){j.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var i=this._map;return i&&i.removeControl(this),this.options.position=a,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var m=this._container=this.onAdd(l),a=this.getPosition(),o=l._controlCorners[a];return j.DomUtil.addClass(m,"leaflet-control"),a.indexOf("bottom")!==-1?o.insertBefore(m,o.firstChild):o.appendChild(m),this},remove:function(){return this._map?(j.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),j.control=function(a){return new j.Control(a)},j.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function l(e,i){var n=a+e+" "+a+i;m[e+i]=j.DomUtil.create("div",n,o)}var m=this._controlCorners={},a="leaflet-",o=this._controlContainer=j.DomUtil.create("div",a+"control-container",this._container);l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){j.DomUtil.remove(this._controlContainer)}}),j.Control.Zoom=j.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(l){var m="leaflet-control-zoom",a=j.DomUtil.create("div",m+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,m+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,m+"-out",a,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(l,p,a,q,m){var o=j.DomUtil.create("a",a,q);return o.innerHTML=l,o.href="#",o.title=p,o.setAttribute("role","button"),o.setAttribute("aria-label",p),j.DomEvent.on(o,"mousedown dblclick",j.DomEvent.stopPropagation).on(o,"click",j.DomEvent.stop).on(o,"click",m,this).on(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var a=this._map,i="leaflet-disabled";j.DomUtil.removeClass(this._zoomInButton,i),j.DomUtil.removeClass(this._zoomOutButton,i),(this._disabled||a._zoom===a.getMinZoom())&&j.DomUtil.addClass(this._zoomOutButton,i),(this._disabled||a._zoom===a.getMaxZoom())&&j.DomUtil.addClass(this._zoomInButton,i)}}),j.Map.mergeOptions({zoomControl:!0}),j.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new j.Control.Zoom,this.addControl(this.zoomControl))}),j.control.zoom=function(a){return new j.Control.Zoom(a)},j.Control.Attribution=j.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){j.setOptions(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=j.DomUtil.create("div","leaflet-control-attribution"),j.DomEvent&&j.DomEvent.disableClickPropagation(this._container);for(var i in a._layers){a._layers[i].getAttribution&&this.addAttribution(a._layers[i].getAttribution())}return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var m in this._attributions){this._attributions[m]&&l.push(m)}var a=[];this.options.prefix&&a.push(this.options.prefix),l.length&&a.push(l.join(", ")),this._container.innerHTML=a.join(" | ")}}}),j.Map.mergeOptions({attributionControl:!0}),j.Map.addInitHook(function(){this.options.attributionControl&&(new j.Control.Attribution).addTo(this)}),j.control.attribution=function(a){return new j.Control.Attribution(a)},j.Control.Scale=j.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var m="leaflet-control-scale",a=j.DomUtil.create("div",m),o=this.options;return this._addScales(o,m+"-line",a),l.on(o.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),a},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,m,a){l.metric&&(this._mScale=j.DomUtil.create("div",m,a)),l.imperial&&(this._iScale=j.DomUtil.create("div",m,a))},_update:function(){var l=this._map,m=l.getSize().y/2,a=l.distance(l.containerPointToLatLng([0,m]),l.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(a)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(l){var m=this._getRoundNum(l),a=m<1000?m+" m":m/1000+" km";this._updateScale(this._mScale,a,m/l)},_updateImperial:function(l){var m,a,q,p=3.2808399*l;p>5280?(m=p/5280,a=this._getRoundNum(m),this._updateScale(this._iScale,a+" mi",a/m)):(q=this._getRoundNum(p),this._updateScale(this._iScale,q+" ft",q/p))},_updateScale:function(l,m,a){l.style.width=Math.round(this.options.maxWidth*a)+"px",l.innerHTML=m},_getRoundNum:function(l){var m=Math.pow(10,(Math.floor(l)+"").length-1),a=l/m;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,m*a}}),j.control.scale=function(a){return new j.Control.Scale(a)},j.Control.Layers=j.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,m,a,o){return a<o?-1:o<a?1:0}},initialize:function(l,m,a){j.setOptions(this,a),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var o in l){this._addLayer(l[o],o)}for(o in m){this._addLayer(m[o],o,!0)}},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++){this._layers[a].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(a,i){return this._addLayer(a,i),this._map?this._update():this},addOverlay:function(a,i){return this._addLayer(a,i,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var i=this._getLayer(j.stamp(a));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){j.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._form.clientHeight?(j.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):j.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return j.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",o=this._container=j.DomUtil.create("div",l),a=this.options.collapsed;o.setAttribute("aria-haspopup",!0),j.DomEvent.disableClickPropagation(o),j.Browser.touch||j.DomEvent.disableScrollPropagation(o);var p=this._form=j.DomUtil.create("form",l+"-list");a&&(this._map.on("click",this.collapse,this),j.Browser.android||j.DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var m=this._layersLink=j.DomUtil.create("a",l+"-toggle",o);m.href="#",m.title="Layers",j.Browser.touch?j.DomEvent.on(m,"click",j.DomEvent.stop).on(m,"click",this.expand,this):j.DomEvent.on(m,"focus",this.expand,this),j.DomEvent.on(p,"click",function(){setTimeout(j.bind(this._onInputClick,this),0)},this),a||this.expand(),this._baseLayersList=j.DomUtil.create("div",l+"-base",p),this._separator=j.DomUtil.create("div",l+"-separator",p),this._overlaysList=j.DomUtil.create("div",l+"-overlays",p),o.appendChild(p)},_getLayer:function(a){for(var i=0;i<this._layers.length;i++){if(this._layers[i]&&j.stamp(this._layers[i].layer)===a){return this._layers[i]}}},_addLayer:function(l,m,a){l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:m,overlay:a}),this.options.sortLayers&&this._layers.sort(j.bind(function(i,n){return this.options.sortFunction(i.layer,n.layer,i.name,n.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex))},_update:function(){if(!this._container){return this}j.DomUtil.empty(this._baseLayersList),j.DomUtil.empty(this._overlaysList);var l,o,a,p,m=0;for(a=0;a<this._layers.length;a++){p=this._layers[a],this._addItem(p),o=o||p.overlay,l=l||!p.overlay,m+=p.overlay?0:1}return this.options.hideSingleBase&&(l=l&&m>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=o&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var m=this._getLayer(j.stamp(l.target)),a=m.overlay?"add"===l.type?"overlayadd":"overlayremove":"add"===l.type?"baselayerchange":null;a&&this._map.fire(a,m)},_createRadioElement:function(e,a){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(a?' checked="checked"':"")+"/>",l=h.createElement("div");return l.innerHTML=m,l.firstChild},_addItem:function(m){var l,u=h.createElement("label"),p=this._map.hasLayer(m.layer);m.overlay?(l=h.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=p):l=this._createRadioElement("leaflet-base-layers",p),l.layerId=j.stamp(m.layer),j.DomEvent.on(l,"click",this._onInputClick,this);var q=h.createElement("span");q.innerHTML=" "+m.name;var e=h.createElement("div");u.appendChild(e),e.appendChild(l),e.appendChild(q);var o=m.overlay?this._overlaysList:this._baseLayersList;return o.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){var l,q,a,v=this._form.getElementsByTagName("input"),u=[],m=[];this._handlingClick=!0;for(var p=v.length-1;p>=0;p--){l=v[p],q=this._getLayer(l.layerId).layer,a=this._map.hasLayer(q),l.checked&&!a?u.push(q):!l.checked&&a&&m.push(q)}for(p=0;p<m.length;p++){this._map.removeLayer(m[p])}for(p=0;p<u.length;p++){this._map.addLayer(u[p])}this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,l,p=this._form.getElementsByTagName("input"),m=this._map.getZoom(),i=p.length-1;i>=0;i--){a=p[i],l=this._getLayer(a.layerId).layer,a.disabled=l.options.minZoom!==c&&m<l.options.minZoom||l.options.maxZoom!==c&&m>l.options.maxZoom}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),j.control.layers=function(l,m,a){return new j.Control.Layers(l,m,a)}}(window,document);